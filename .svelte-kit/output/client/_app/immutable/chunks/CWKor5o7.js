import{I as y,J as h,K as S,M as k,N as _,O as t,Q as q,R as b,T as E,u as M,U as V,V as w}from"./CXj4HnGG.js";function m(e,a,v=!1){if(e.multiple){if(a==null)return;if(!h(a))return S();for(var l of e.options)l.selected=a.includes(s(l));return}for(l of e.options){var u=s(l);if(k(u,a)){l.selected=!0;return}}(!v||a!==void 0)&&(e.selectedIndex=-1)}function x(e){var a=new MutationObserver(()=>{m(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),y(()=>{a.disconnect()})}function O(e,a,v=a){var l=new WeakSet,u=!0;_(e,"change",r=>{var i=r?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(i),s);else{var f=e.querySelector(i)??e.querySelector("option:not([disabled])");n=f&&s(f)}v(n),t!==null&&l.add(t)}),q(()=>{var r=a();if(e===document.activeElement){var i=b??t;if(l.has(i))return}if(m(e,r,u),u&&r===void 0){var n=e.querySelector(":checked");n!==null&&(r=s(n),v(r))}e.__value=r,u=!1}),x(e)}function s(e){return"__value"in e?e.__value:e.value}function W(e,a,v=a){var l=new WeakSet;_(e,"input",async u=>{var r=u?e.defaultValue:e.value;if(r=c(e)?o(r):r,v(r),t!==null&&l.add(t),await E(),r!==(r=a())){var i=e.selectionStart,n=e.selectionEnd,f=e.value.length;if(e.value=r??"",n!==null){var d=e.value.length;i===n&&n===f&&d>f?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=i,e.selectionEnd=Math.min(n,d))}}}),(w&&e.defaultValue!==e.value||M(a)==null&&e.value)&&(v(c(e)?o(e.value):e.value),t!==null&&l.add(t)),V(()=>{var u=a();if(e===document.activeElement){var r=b??t;if(l.has(r))return}c(e)&&u===o(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function c(e){var a=e.type;return a==="number"||a==="range"}function o(e){return e===""?null:+e}export{O as a,W as b,x as i,m as s};
