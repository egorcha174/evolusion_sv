import{ag as de,af as p,ad as u}from"./CM9YBULs.js";import{_ as b}from"./C1FmrZbK.js";import{k as x,m as se,n as P,o as le,p as ue,h as ge}from"./3QiWljis.js";const D=1,A={id:"apple-graphite",name:"Apple Graphite",version:"1.0.0",author:"Evolusion",description:"Clean, high contrast, translucent feel inspired by iOS.",isCustom:!1},I={dashboardBackgroundType:"gradient",dashboardGradient:{angle:135,stops:[{color:"#F5F5F7",position:0},{color:"#E5E5EA",position:100}]},bgPage:"#f5f5f7",cardOpacity:.8,cardBorderRadius:18,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"#0071E3",cardBackground:"rgba(255, 255, 255, 0.7)",cardBackgroundOn:"rgba(255, 255, 255, 0.9)",shadowCard:"0 4px 12px rgba(0,0,0,0.06)",shadowDropdown:"0 8px 24px rgba(0, 0, 0, 0.15)",panelOpacity:.9,bgPanel:"rgba(255, 255, 255, 0.9)",bgInput:"rgba(255,255,255,0.8)",bgHeader:"rgba(255, 255, 255, 0.8)",textPrimary:"#1d1d1f",textSecondary:"#86868b",textMuted:"#aeaeb2",nameTextColor:"#1d1d1f",statusTextColor:"#86868b",valueTextColor:"#1d1d1f",unitTextColor:"#86868b",nameTextColorOn:"#1d1d1f",statusTextColorOn:"#0071e3",valueTextColorOn:"#1d1d1f",unitTextColorOn:"#0071e3",accentPrimary:"#0071e3",accentError:"#ff3b30",accentSuccess:"#34c759",accentWarning:"#ff9500",accentInfo:"#5ac8fa",widgetSwitchOn:"#34c759"},M={dashboardBackgroundType:"color",dashboardBackgroundColor:"#000000",bgPage:"#000000",cardOpacity:.75,cardBorderRadius:18,cardBorderWidth:1,cardBorderColor:"rgba(255, 255, 255, 0.1)",cardBorderColorOn:"#0A84FF",cardBackground:"rgba(28, 28, 30, 0.6)",cardBackgroundOn:"rgba(44, 44, 46, 0.8)",shadowCard:"0 2px 8px rgba(0, 0, 0, 0.2)",shadowDropdown:"0 8px 24px rgba(0, 0, 0, 0.5)",panelOpacity:.9,bgPanel:"rgba(28, 28, 30, 0.9)",bgInput:"rgba(28,28,30,0.8)",bgHeader:"rgba(28, 28, 30, 0.8)",textPrimary:"#f5f5f7",textSecondary:"#86868b",textMuted:"#636366",nameTextColor:"#f5f5f7",statusTextColor:"#86868b",valueTextColor:"#f5f5f7",unitTextColor:"#86868b",nameTextColorOn:"#f5f5f7",statusTextColorOn:"#0a84ff",valueTextColorOn:"#f5f5f7",unitTextColorOn:"#0a84ff",accentPrimary:"#0a84ff",accentError:"#ff453a",accentSuccess:"#30d158",accentWarning:"#ff9f0a",accentInfo:"#64d2ff",widgetSwitchOn:"#30d158"},he={schemaVersion:D,manifest:A,light:I,dark:M},me=Object.freeze(Object.defineProperty({__proto__:null,dark:M,default:he,light:I,manifest:A,schemaVersion:D},Symbol.toStringTag,{value:"Module"})),W=1,L={id:"dark-minimal",name:"Dark Minimal",version:"1.0.0",author:"Evolusion",description:"Pure black and high contrast for OLED screens.",isCustom:!1},$={dashboardBackgroundType:"color",dashboardBackgroundColor:"#FFFFFF",bgPage:"#FFFFFF",cardOpacity:1,cardBorderRadius:4,cardBorderWidth:1,cardBorderColor:"#000000",cardBorderColorOn:"#000000",cardBackground:"#FFFFFF",cardBackgroundOn:"#000000",shadowCard:"none",shadowDropdown:"0 4px 8px rgba(0, 0, 0, 0.1)",panelOpacity:1,bgPanel:"#FFFFFF",bgInput:"#FFFFFF",bgHeader:"#FFFFFF",textPrimary:"#000000",textSecondary:"#333333",textMuted:"#666666",nameTextColor:"#000000",statusTextColor:"#666666",valueTextColor:"#000000",unitTextColor:"#000000",nameTextColorOn:"#FFFFFF",statusTextColorOn:"#CCCCCC",valueTextColorOn:"#FFFFFF",unitTextColorOn:"#FFFFFF",accentPrimary:"#000000",accentError:"#000000",accentSuccess:"#000000",accentWarning:"#000000",accentInfo:"#000000",widgetSwitchOn:"#000000"},j={dashboardBackgroundType:"color",dashboardBackgroundColor:"#000000",bgPage:"#000000",cardOpacity:1,cardBorderRadius:4,cardBorderWidth:1,cardBorderColor:"#333333",cardBorderColorOn:"#FFFFFF",cardBackground:"#000000",cardBackgroundOn:"#FFFFFF",shadowCard:"none",shadowDropdown:"0 4px 8px rgba(255, 255, 255, 0.1)",panelOpacity:1,bgPanel:"#000000",bgInput:"#111111",bgHeader:"#000000",textPrimary:"#FFFFFF",textSecondary:"#CCCCCC",textMuted:"#999999",nameTextColor:"#FFFFFF",statusTextColor:"#999999",valueTextColor:"#FFFFFF",unitTextColor:"#FFFFFF",nameTextColorOn:"#000000",statusTextColorOn:"#333333",valueTextColorOn:"#000000",unitTextColorOn:"#000000",accentPrimary:"#FFFFFF",accentError:"#FFFFFF",accentSuccess:"#FFFFFF",accentWarning:"#FFFFFF",accentInfo:"#FFFFFF",widgetSwitchOn:"#FFFFFF"},pe={schemaVersion:W,manifest:L,light:$,dark:j},fe=Object.freeze(Object.defineProperty({__proto__:null,dark:j,default:pe,light:$,manifest:L,schemaVersion:W},Symbol.toStringTag,{value:"Module"})),V=1,H={id:"light-modern",name:"Light Modern",version:"1.0.0",author:"Evolusion",description:"Soft shadows and rounded corners.",isCustom:!1},R={dashboardBackgroundType:"color",dashboardBackgroundColor:"#F0F2F5",bgPage:"#F0F2F5",cardOpacity:1,cardBorderRadius:12,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"transparent",cardBackground:"#FFFFFF",cardBackgroundOn:"#FFFFFF",shadowCard:"0 1px 2px rgba(0, 0, 0, 0.1)",shadowDropdown:"0 4px 12px rgba(0, 0, 0, 0.1)",panelOpacity:1,bgPanel:"#FFFFFF",bgInput:"#F0F2F5",bgHeader:"#FFFFFF",textPrimary:"#050505",textSecondary:"#65676B",textMuted:"#B0B3B8",nameTextColor:"#050505",statusTextColor:"#65676B",valueTextColor:"#050505",unitTextColor:"#65676B",nameTextColorOn:"#1877F2",statusTextColorOn:"#1877F2",valueTextColorOn:"#1877F2",unitTextColorOn:"#1877F2",accentPrimary:"#1877F2",accentError:"#FA383E",accentSuccess:"#42B72A",accentWarning:"#F7B928",accentInfo:"#1877F2",widgetSwitchOn:"#1877F2"},z={dashboardBackgroundType:"color",dashboardBackgroundColor:"#18191A",bgPage:"#18191A",cardOpacity:1,cardBorderRadius:12,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"transparent",cardBackground:"#242526",cardBackgroundOn:"#3A3B3C",shadowCard:"0 1px 2px rgba(0, 0, 0, 0.2)",shadowDropdown:"0 4px 12px rgba(0, 0, 0, 0.3)",panelOpacity:1,bgPanel:"#242526",bgInput:"#3A3B3C",bgHeader:"#242526",textPrimary:"#E4E6EB",textSecondary:"#B0B3B8",textMuted:"#606770",nameTextColor:"#E4E6EB",statusTextColor:"#B0B3B8",valueTextColor:"#E4E6EB",unitTextColor:"#B0B3B8",nameTextColorOn:"#2D88FF",statusTextColorOn:"#2D88FF",valueTextColorOn:"#2D88FF",unitTextColorOn:"#2D88FF",accentPrimary:"#2D88FF",accentError:"#F02849",accentSuccess:"#42B72A",accentWarning:"#F7B928",accentInfo:"#2D88FF",widgetSwitchOn:"#2D88FF"},Fe={schemaVersion:V,manifest:H,light:R,dark:z},ye=Object.freeze(Object.defineProperty({__proto__:null,dark:z,default:Fe,light:R,manifest:H,schemaVersion:V},Symbol.toStringTag,{value:"Module"})),N=1,K={id:"ocean-blue",name:"Ocean Blue",version:"1.0.0",author:"Evolusion",description:"Deep blue gradients and teal accents.",isCustom:!1},G={dashboardBackgroundType:"gradient",dashboardGradient:{angle:180,stops:[{color:"#E0F7FA",position:0},{color:"#B2EBF2",position:100}]},bgPage:"#E0F7FA",cardOpacity:.9,cardBorderRadius:8,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"#00ACC1",cardBackground:"#FFFFFF",cardBackgroundOn:"#E0F2F1",shadowCard:"0 2px 5px rgba(0,0,0,0.1)",shadowDropdown:"0 4px 12px rgba(0,0,0,0.15)",panelOpacity:.8,bgPanel:"rgba(255, 255, 255, 0.8)",bgInput:"#FFFFFF",bgHeader:"rgba(255, 255, 255, 0.8)",textPrimary:"#263238",textSecondary:"#546E7A",textMuted:"#90A4AE",nameTextColor:"#263238",statusTextColor:"#546E7A",valueTextColor:"#00838F",unitTextColor:"#546E7A",nameTextColorOn:"#006064",statusTextColorOn:"#00838F",valueTextColorOn:"#006064",unitTextColorOn:"#00838F",accentPrimary:"#00BCD4",accentError:"#FF7043",accentSuccess:"#26A69A",accentWarning:"#FFA726",accentInfo:"#29B6F6",widgetSwitchOn:"#26A69A"},J={dashboardBackgroundType:"gradient",dashboardGradient:{angle:180,stops:[{color:"#01579B",position:0},{color:"#002F6C",position:100}]},bgPage:"#01579B",cardOpacity:.85,cardBorderRadius:8,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"#4DD0E1",cardBackground:"#0277BD",cardBackgroundOn:"#0288D1",shadowCard:"0 2px 5px rgba(0,0,0,0.2)",shadowDropdown:"0 4px 12px rgba(0,0,0,0.3)",panelOpacity:.8,bgPanel:"rgba(2, 119, 189, 0.8)",bgInput:"#01579B",bgHeader:"rgba(2, 119, 189, 0.8)",textPrimary:"#E1F5FE",textSecondary:"#B3E5FC",textMuted:"#81D4FA",nameTextColor:"#FFFFFF",statusTextColor:"#B3E5FC",valueTextColor:"#4DD0E1",unitTextColor:"#B3E5FC",nameTextColorOn:"#E0F7FA",statusTextColorOn:"#80DEEA",valueTextColorOn:"#FFFFFF",unitTextColorOn:"#80DEEA",accentPrimary:"#4DD0E1",accentError:"#FFAB91",accentSuccess:"#80CBC4",accentWarning:"#FFCC80",accentInfo:"#81D4FA",widgetSwitchOn:"#80CBC4"},we={schemaVersion:N,manifest:K,light:G,dark:J},Ce=Object.freeze(Object.defineProperty({__proto__:null,dark:J,default:we,light:G,manifest:K,schemaVersion:N},Symbol.toStringTag,{value:"Module"})),U=1,q={id:"sunset-warm",name:"Sunset Warm",version:"1.0.0",author:"Evolusion",description:"Warm orange and red gradients.",isCustom:!1},Y={dashboardBackgroundType:"gradient",dashboardGradient:{angle:45,stops:[{color:"#FFF3E0",position:0},{color:"#FFE0B2",position:100}]},bgPage:"#FFF3E0",cardOpacity:.9,cardBorderRadius:20,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"#FF6D00",cardBackground:"#FFFFFF",cardBackgroundOn:"#FFF8E1",shadowCard:"0 2px 6px rgba(0,0,0,0.1)",shadowDropdown:"0 4px 12px rgba(0,0,0,0.15)",panelOpacity:.7,bgPanel:"rgba(255, 255, 255, 0.9)",bgInput:"#FFFFFF",bgHeader:"rgba(255, 255, 255, 0.8)",textPrimary:"#3E2723",textSecondary:"#8D6E63",textMuted:"#D7CCC8",nameTextColor:"#3E2723",statusTextColor:"#8D6E63",valueTextColor:"#E65100",unitTextColor:"#8D6E63",nameTextColorOn:"#BF360C",statusTextColorOn:"#E65100",valueTextColorOn:"#BF360C",unitTextColorOn:"#E65100",accentPrimary:"#FF6D00",accentError:"#D84315",accentSuccess:"#558B2F",accentWarning:"#F9A825",accentInfo:"#42A5F5",widgetSwitchOn:"#558B2F"},Z={dashboardBackgroundType:"gradient",dashboardGradient:{angle:45,stops:[{color:"#212121",position:0},{color:"#3E2723",position:100}]},bgPage:"#212121",cardOpacity:.85,cardBorderRadius:20,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"#FFAB40",cardBackground:"#424242",cardBackgroundOn:"#4E342E",shadowCard:"0 2px 6px rgba(0,0,0,0.2)",shadowDropdown:"0 4px 12px rgba(0,0,0,0.3)",panelOpacity:.8,bgPanel:"rgba(62, 39, 35, 0.8)",bgInput:"#212121",bgHeader:"rgba(62, 39, 35, 0.8)",textPrimary:"#FFF3E0",textSecondary:"#BCAAA4",textMuted:"#8D6E63",nameTextColor:"#FFF3E0",statusTextColor:"#BCAAA4",valueTextColor:"#FFAB40",unitTextColor:"#BCAAA4",nameTextColorOn:"#FFE0B2",statusTextColorOn:"#FFCC80",valueTextColorOn:"#FFE0B2",unitTextColorOn:"#FFCC80",accentPrimary:"#FFAB40",accentError:"#FF7043",accentSuccess:"#9CCC65",accentWarning:"#FFEE58",accentInfo:"#4FC3F7",widgetSwitchOn:"#9CCC65"},be={schemaVersion:U,manifest:q,light:Y,dark:Z},xe=Object.freeze(Object.defineProperty({__proto__:null,dark:Z,default:be,light:Y,manifest:q,schemaVersion:U},Symbol.toStringTag,{value:"Module"})),y=Object.assign({"./presets/apple-graphite.json":me,"./presets/dark-minimal.json":fe,"./presets/light-modern.json":ye,"./presets/ocean-blue.json":Ce,"./presets/sunset-warm.json":xe}),w=Object.assign({});function Te(){const e=[];for(const t in y){const r=y[t].default;r&&r.manifest&&e.push({...r.manifest,isCustom:!1})}for(const t in w){const r=w[t].default;r&&r.manifest&&e.push({...r.manifest,isCustom:!0})}if(typeof localStorage<"u")try{const t=JSON.parse(localStorage.getItem("evolusion-custom-themes")||"{}");Object.values(t).forEach(r=>{r.manifest&&e.push({...r.manifest,isCustom:!0})})}catch{}return e}async function O(e){for(const t in y){const r=y[t].default;if(r.manifest.id===e)return r}for(const t in w){const r=w[t].default;if(r.manifest.id===e)return r}if(typeof localStorage<"u")try{const t=JSON.parse(localStorage.getItem("evolusion-custom-themes")||"{}");if(t[e])return t[e]}catch{}return null}function Oe(e){return{"--card-opacity":String(e.cardOpacity),"--card-border-radius":`${e.cardBorderRadius}px`,"--card-border-width":`${e.cardBorderWidth}px`,"--card-border-color":e.cardBorderColor,"--card-border-color-on":e.cardBorderColorOn,"--card-background":e.cardBackground,"--card-background-on":e.cardBackgroundOn,"--shadow-card":e.shadowCard,"--shadow-dropdown":e.shadowDropdown,"--bg-card":e.cardBackground,"--bg-card-hover":e.cardBackgroundOn,"--panel-opacity":String(e.panelOpacity),"--bg-panel":e.bgPanel,"--bg-page":e.bgPage,"--bg-input":e.bgInput,"--bg-header":e.bgHeader,"--text-primary":e.textPrimary,"--text-secondary":e.textSecondary,"--text-muted":e.textMuted,"--name-text-color":e.nameTextColor,"--status-text-color":e.statusTextColor,"--value-text-color":e.valueTextColor,"--unit-text-color":e.unitTextColor,"--name-text-color-on":e.nameTextColorOn,"--status-text-color-on":e.statusTextColorOn,"--value-text-color-on":e.valueTextColorOn,"--unit-text-color-on":e.unitTextColorOn,"--accent-primary":e.accentPrimary,"--accent-error":e.accentError,"--accent-success":e.accentSuccess,"--accent-warning":e.accentWarning,"--accent-info":e.accentInfo,"--widget-switch-on":e.widgetSwitchOn}}function Se(e){return e.dashboardBackgroundType==="color"&&e.dashboardBackgroundColor?`body { background-color: ${e.dashboardBackgroundColor}; }`:""}function S(e,t,r){if(e==="day")return"light";if(e==="night")return"dark";if(e==="schedule"&&(t==null?void 0:t.mode)==="time"&&t.dayStart&&t.nightStart){const i=new Date,a=i.getHours()*60+i.getMinutes(),[o,n]=t.dayStart.split(":").map(Number),c=o*60+n,[s,d]=t.nightStart.split(":").map(Number),l=s*60+d;return c<l?a>=c&&a<l?"light":"dark":a>=c||a<l?"light":"dark"}return typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const Q={dashboardBackgroundType:"gradient",dashboardGradient:{angle:135,stops:[{color:"#EAEAEB",position:0},{color:"#DCDCDC",position:100}]},bgPage:"#f0f2f5",cardOpacity:.85,cardBorderRadius:16,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"#2196f3",cardBackground:"rgba(255, 255, 255, 0.8)",cardBackgroundOn:"rgba(255, 255, 255, 0.95)",shadowCard:"0 1px 2px rgba(0, 0, 0, 0.05)",shadowDropdown:"0 4px 12px rgba(0, 0, 0, 0.15)",panelOpacity:.95,bgPanel:"rgba(255, 255, 255, 0.95)",bgInput:"#ffffff",bgHeader:"rgba(255, 255, 255, 0.8)",textPrimary:"#1a1d21",textSecondary:"#65676b",textMuted:"#b0b3b8",nameTextColor:"#1a1d21",statusTextColor:"#65676b",valueTextColor:"#1a1d21",unitTextColor:"#65676b",nameTextColorOn:"#1a1d21",statusTextColorOn:"#2196f3",valueTextColorOn:"#1a1d21",unitTextColorOn:"#2196f3",accentPrimary:"#2196f3",accentError:"#f44336",accentSuccess:"#4caf50",accentWarning:"#ff9800",accentInfo:"#03a9f4",widgetSwitchOn:"#4caf50"},X={dashboardBackgroundType:"color",dashboardBackgroundColor:"#1C1C1E",bgPage:"#111315",cardOpacity:.8,cardBorderRadius:16,cardBorderWidth:0,cardBorderColor:"transparent",cardBorderColorOn:"#64b5f6",cardBackground:"rgba(44, 44, 46, 0.8)",cardBackgroundOn:"rgba(60, 60, 62, 0.85)",shadowCard:"0 2px 4px rgba(0, 0, 0, 0.2)",shadowDropdown:"0 4px 12px rgba(0, 0, 0, 0.4)",panelOpacity:.95,bgPanel:"rgba(28, 28, 30, 0.95)",bgInput:"#2d3035",bgHeader:"rgba(28, 28, 30, 0.8)",textPrimary:"#e4e6eb",textSecondary:"#b0b3b8",textMuted:"#6d7177",nameTextColor:"#e4e6eb",statusTextColor:"#b0b3b8",valueTextColor:"#e4e6eb",unitTextColor:"#b0b3b8",nameTextColorOn:"#e4e6eb",statusTextColorOn:"#64b5f6",valueTextColorOn:"#e4e6eb",unitTextColorOn:"#64b5f6",accentPrimary:"#64b5f6",accentError:"#e57373",accentSuccess:"#81c784",accentWarning:"#ffb74d",accentInfo:"#4fc3f7",widgetSwitchOn:"#81c784"},ee="evolusion-theme-settings",Be={currentThemeId:"apple-graphite",currentScheme:"light",mode:"auto",schedule:void 0,availableThemes:[],loadedTheme:null};function Ee(){try{const e=localStorage.getItem(ee);return e?JSON.parse(e):{}}catch{return{}}}function f(e){const t={currentThemeId:e.currentThemeId,currentScheme:e.currentScheme,mode:e.mode,schedule:e.schedule};localStorage.setItem(ee,JSON.stringify(t))}function ve(){const e=Ee(),{subscribe:t,set:r,update:i}=p({...Be,...e});return{subscribe:t,async init(){const a=Te(),o=u({subscribe:t});let n=o.currentThemeId,c=await O(n);!c&&a.length>0&&(n=a[0].id,c=await O(n));const s=S(o.mode,o.schedule);i(d=>({...d,availableThemes:a,currentThemeId:n,loadedTheme:c,currentScheme:s})),this.applyCSSVariables(),this.startScheduler()},async setTheme(a){const o=await O(a);o&&(i(n=>{const c={...n,currentThemeId:a,loadedTheme:o};return f(c),c}),this.applyCSSVariables())},setMode(a){i(o=>{const n=S(a,o.schedule),c={...o,mode:a,currentScheme:n};return f(c),c}),this.applyCSSVariables()},setSchedule(a){i(n=>{const c={...n,schedule:a};return f(c),c});const o=u({subscribe:t});this.setMode(o.mode)},toggleScheme(){i(a=>{const o=a.currentScheme==="light"?"dark":"light",c={...a,currentScheme:o,mode:o==="light"?"day":"night"};return f(c),c}),this.applyCSSVariables()},applyCSSVariables(){const a=u({subscribe:t}),{loadedTheme:o,currentScheme:n}=a,c=o?o[n]:n==="light"?Q:X,s=Oe(c),d=document.documentElement;Object.entries(s).forEach(([ce,ie])=>{d.style.setProperty(ce,ie)});const l=Se(c);let g=document.getElementById("theme-background-styles");g||(g=document.createElement("style"),g.id="theme-background-styles",document.head.appendChild(g)),g.textContent=l},startScheduler(){setInterval(()=>{const a=u({subscribe:t});if(a.mode==="schedule"||a.mode==="auto"){const o=S(a.mode,a.schedule);o!==a.currentScheme&&(i(n=>({...n,currentScheme:o})),this.applyCSSVariables())}},6e4)}}}const ke=ve(),Ye=de(ke,e=>{var t;return((t=e.loadedTheme)==null?void 0:t[e.currentScheme])||(e.currentScheme==="light"?Q:X)}),_e=[{code:"ru",name:"Русский",dir:"ltr"},{code:"en",name:"English",dir:"ltr"},{code:"ar",name:"العربية",dir:"rtl"},{code:"zh",name:"中文",dir:"ltr"},{code:"es",name:"Español",dir:"ltr"},{code:"de",name:"Deutsch",dir:"ltr"},{code:"fr",name:"Français",dir:"ltr"},{code:"pt",name:"Português",dir:"ltr"},{code:"ja",name:"日本語",dir:"ltr"},{code:"ko",name:"한국어",dir:"ltr"}],Pe=p("ru"),De=p("ltr"),T=p([..._e]),te="evolusion_locale",B="evolusion_custom_langs";x("ru",()=>b(()=>import("./BgBqonHr.js"),[],import.meta.url));x("en",()=>b(()=>import("./hppTIY5-.js"),[],import.meta.url));x("ar",()=>b(()=>import("./Dy1p_8NI.js"),[],import.meta.url));["zh","es","de","fr","pt","ja","ko"].forEach(e=>{x(e,()=>b(()=>import("./hppTIY5-.js"),[],import.meta.url))});async function Ze(){Me();let e="ru";const t=localStorage.getItem(te);if(t)e=t;else{const r=le();if(r){const i=u(T).find(a=>a.code===r||a.code===r.split("-")[0]);i&&(e=i.code)}}ue({fallbackLocale:"ru",initialLocale:e}),Ae(e)}async function Ae(e){se.set(e),Pe.set(e),localStorage.setItem(te,e);const t=u(T).find(i=>i.code===e),r=(t==null?void 0:t.dir)||"ltr";De.set(r),document.documentElement.dir=r,document.documentElement.lang=e,r==="rtl"?document.body.classList.add("rtl"):document.body.classList.remove("rtl")}function Qe(e){try{const t=JSON.parse(e);if(!t.locale||!t.name||!t.translations)throw new Error("Invalid JSON format");return P(t.locale,t.translations),T.update(r=>[...r.filter(a=>a.code!==t.locale),{code:t.locale,name:t.name,dir:t.direction||"ltr"}]),Ie(t),!0}catch(t){return console.error("Failed to import language",t),!1}}function Ie(e){const t=JSON.parse(localStorage.getItem(B)||"{}");t[e.locale]=e,localStorage.setItem(B,JSON.stringify(t))}function Me(){try{const e=JSON.parse(localStorage.getItem(B)||"{}");Object.values(e).forEach(t=>{P(t.locale,t.translations),T.update(r=>r.some(i=>i.code===t.locale)?r:[...r,{code:t.locale,name:t.name,dir:t.direction||"ltr"}])})}catch(e){console.error("Failed to load custom languages",e)}}const We={0:"sunny",1:"partly-cloudy",2:"partly-cloudy",3:"cloudy",45:"fog",48:"fog",51:"rain-light",53:"rain",55:"rain-heavy",56:"rain-snow",57:"rain-snow",61:"rain-light",63:"rain",65:"rain-heavy",66:"rain-snow",67:"rain-snow",71:"snow-light",73:"snow",75:"snow-heavy",77:"snow",80:"rain",81:"rain-heavy",82:"rain-heavy",85:"snow",86:"snow-heavy",95:"lightning",96:"lightning-rainy",99:"lightning-rainy"},k={default:{sunny:"mdi:weather-sunny","partly-cloudy":"mdi:weather-partly-cloudy",cloudy:"mdi:weather-cloudy",fog:"mdi:weather-fog","rain-light":"mdi:weather-rainy",rain:"mdi:weather-pouring","rain-heavy":"mdi:weather-pouring","rain-snow":"mdi:weather-snowy-rainy","snow-light":"mdi:weather-snowy",snow:"mdi:weather-snowy","snow-heavy":"mdi:weather-snowy-heavy",lightning:"mdi:weather-lightning","lightning-rainy":"mdi:weather-lightning-rainy",unknown:"mdi:weather-cloudy"},outline:{sunny:"mdi:white-balance-sunny","partly-cloudy":"mdi:weather-partly-cloudy",cloudy:"mdi:cloud-outline",fog:"mdi:weather-fog","rain-light":"mdi:weather-rainy",rain:"mdi:weather-pouring","rain-heavy":"mdi:weather-pouring","rain-snow":"mdi:weather-snowy-rainy","snow-light":"mdi:weather-snowy",snow:"mdi:weather-snowy","snow-heavy":"mdi:weather-snowy-heavy",lightning:"mdi:weather-lightning","lightning-rainy":"mdi:weather-lightning-rainy",unknown:"mdi:cloud-outline"},filled:{sunny:"mdi:weather-sunny","partly-cloudy":"mdi:cloud",cloudy:"mdi:cloud",fog:"mdi:weather-fog","rain-light":"mdi:weather-rainy",rain:"mdi:weather-pouring","rain-heavy":"mdi:weather-pouring","rain-snow":"mdi:weather-snowy-rainy","snow-light":"mdi:weather-snowy",snow:"mdi:weather-snowy","snow-heavy":"mdi:weather-snowy-heavy",lightning:"mdi:weather-lightning","lightning-rainy":"mdi:weather-lightning-rainy",unknown:"mdi:cloud"}};function m(e,t="default"){const r=We[e]||"unknown";return k[t][r]||k.default[r]||"mdi:weather-cloudy"}function E(e){return{0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",77:"Snow grains",80:"Slight showers",81:"Moderate showers",82:"Violent showers",85:"Snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm w/ hail",99:"Thunderstorm w/ heavy hail"}[e]||"Unknown"}function re(e){return e>=200&&e<300?95:e>=300&&e<400?51:e>=500&&e<600?61:e>=600&&e<700?71:e>=700&&e<800?45:e===800?0:e===801?1:e===802?2:(e>=803,3)}function _(e){return{1e3:0,1003:1,1006:3,1009:3,1030:45,1063:51,1066:71,1069:56,1072:56,1087:95,1114:77,1117:75,1135:45,1147:48,1150:51,1153:51,1180:61,1183:61,1186:63,1189:63,1192:65,1195:65,1198:66,1201:67,1204:56,1207:56,1210:71,1213:71,1216:73,1219:73,1222:75,1225:75,1237:77,1240:80,1243:81,1246:82,1249:66,1252:67,1255:85,1258:86,1261:96,1264:99,1273:95,1276:95,1279:95,1282:95}[e]||3}const Le={id:"openmeteo",name:"Open-Meteo",requiresApiKey:!1,async getWeather(e,t){const r=new URLSearchParams({latitude:e.lat.toString(),longitude:e.lon.toString(),current_weather:"true",timezone:"auto",daily:"weathercode,temperature_2m_max,temperature_2m_min"}),i=await fetch(`https://api.open-meteo.com/v1/forecast?${r}`);if(!i.ok)throw new Error(`OpenMeteo fetch failed: ${i.statusText}`);const a=await i.json(),o=a.current_weather;if(!o)throw new Error("No weather data received from OpenMeteo");const n=[];if(a.daily&&a.daily.time){const c=Math.min(t.forecastDays,a.daily.time.length),s=Math.min(c,a.daily.time.length-1);for(let d=1;d<=s;d++)n.push({date:new Date(a.daily.time[d]),minTemp:Math.round(a.daily.temperature_2m_min[d]),maxTemp:Math.round(a.daily.temperature_2m_max[d]),condition:E(a.daily.weathercode[d]),icon:m(a.daily.weathercode[d],t.iconPack)})}return{temperature:o.temperature,condition:E(o.weathercode),icon:m(o.weathercode,t.iconPack),location:e.name,updatedAt:new Date,forecast:n}}},$e={id:"openweathermap",name:"OpenWeatherMap",requiresApiKey:!0,async getWeather(e,t){var c,s;if(!t.apiKey)throw new Error("API Key required for OpenWeatherMap");const r=`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.lon}&appid=${t.apiKey}&units=metric`,i=await fetch(r);if(!i.ok)throw new Error(`OWM Current failed: ${i.statusText}`);const a=await i.json(),o=re(((c=a.weather[0])==null?void 0:c.id)||800);let n=[];if(t.showForecast){const d=`https://api.openweathermap.org/data/2.5/forecast?lat=${e.lat}&lon=${e.lon}&appid=${t.apiKey}&units=metric`,l=await fetch(d);if(l.ok){const g=await l.json();n=je(g.list,t)}}return{temperature:Math.round(a.main.temp*10)/10,condition:((s=a.weather[0])==null?void 0:s.main)||"Unknown",icon:m(o,t.iconPack),location:a.name||e.name,updatedAt:new Date,forecast:n}}};function je(e,t){const r=new Map;for(const o of e){const n=new Date(o.dt*1e3),c=n.toISOString().split("T")[0],s=new Date().toISOString().split("T")[0];if(c===s)continue;r.has(c)||r.set(c,{mins:[],maxs:[],codes:[],date:n});const d=r.get(c);d.mins.push(o.main.temp_min),d.maxs.push(o.main.temp_max),n.getHours()>=12&&n.getHours()<=15?d.codes.unshift(o.weather[0].id):d.codes.push(o.weather[0].id)}const i=[],a=Array.from(r.keys()).sort().slice(0,t.forecastDays);for(const o of a){const n=r.get(o),c=Math.min(...n.mins),s=Math.max(...n.maxs),d=n.codes[0]||800,l=re(d);i.push({date:n.date,minTemp:Math.round(c),maxTemp:Math.round(s),condition:E(l),icon:m(l,t.iconPack)})}return i}const Ve={id:"weatherapi",name:"WeatherAPI",requiresApiKey:!0,async getWeather(e,t){if(!t.apiKey)throw new Error("API Key required for WeatherAPI");const r=t.showForecast?t.forecastDays+1:1,i=`https://api.weatherapi.com/v1/forecast.json?key=${t.apiKey}&q=${e.lat},${e.lon}&days=${r}`,a=await fetch(i);if(!a.ok)throw a.status===401||a.status===403?new Error("Invalid WeatherAPI Key"):new Error(`WeatherAPI fetch failed: ${a.statusText}`);const o=await a.json(),n=o.current,c=_(n.condition.code),s=[];if(o.forecast&&o.forecast.forecastday){const d=o.forecast.forecastday.slice(1,t.forecastDays+1);for(const l of d){const g=_(l.day.condition.code);s.push({date:new Date(l.date),minTemp:Math.round(l.day.mintemp_c),maxTemp:Math.round(l.day.maxtemp_c),condition:l.day.condition.text,icon:m(g,t.iconPack)})}}return{temperature:n.temp_c,condition:n.condition.text,icon:m(c,t.iconPack),location:o.location.name||e.name,updatedAt:new Date,forecast:s}}},He={lat:55.1644,lon:61.4368,name:"Chelyabinsk (Fallback)"};function Re(e){switch(e){case"openweathermap":return $e;case"weatherapi":return Ve;case"openmeteo":default:return Le}}function ze(e){if(e.useCustomLocation&&e.customLocation)return{lat:e.customLocation.lat,lon:e.customLocation.lon,name:e.customLocation.name||"Custom Location"};const r=u(ge).entities.get("zone.home");return r&&r.attributes.latitude&&r.attributes.longitude?{lat:r.attributes.latitude,lon:r.attributes.longitude,name:r.attributes.friendly_name||"Home"}:He}async function Ne(e){const t=Re(e.provider),r=ze(e);return t.getWeather(r,e)}const ae="evolusion_weather_settings",oe={provider:"openmeteo",useCustomLocation:!1,refreshIntervalMinutes:15,showForecast:!0,forecastDays:3,iconPack:"default",forecastLayout:"vertical"},Ke={current:null,isLoading:!1,error:null},F=p(Ke),C=p(oe);let h=null;async function Xe(){try{const e=localStorage.getItem(ae);if(e){const t=JSON.parse(e);C.set({...oe,...t})}}catch(e){console.error("Failed to load weather settings",e)}C.subscribe(Ge),await v(),ne()}function ne(){h&&clearInterval(h);const e=u(C),t=Math.max(1,e.refreshIntervalMinutes);h=setInterval(v,t*60*1e3)}async function v(){const e=u(C),t=u(F).current;F.update(r=>({...r,isLoading:!t,error:null}));try{const r=await Ne(e);F.set({current:r,isLoading:!1,error:null})}catch(r){console.error("Weather update failed",r),F.update(i=>({...i,isLoading:!1,error:r.message||"Failed to update weather"}))}}function Ge(e){localStorage.setItem(ae,JSON.stringify(e))}function et(){v(),ne()}function tt(){h&&(clearInterval(h),h=null)}export{T as a,F as b,Pe as c,ze as d,Ye as e,Xe as f,tt as g,Ze as h,Qe as i,et as r,Ae as s,ke as t,C as w};
