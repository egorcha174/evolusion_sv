import{aw as i,av as g,ax as w}from"./D78c_VIb.js";const k={bgPage:"#f5f7fa",bgCard:"#ffffff",bgHeader:"#ffffff",bgSidebar:"#1e1e1e",bgInput:"#ffffff",bgDropdown:"#ffffff",textPrimary:"#333333",textSecondary:"#666666",textInverted:"#ffffff",primary:"#2196f3",success:"#4caf50",warning:"#ff9800",error:"#d32f2f",border:"#e0e0e0",divider:"#eeeeee",shadowCard:"0 2px 8px rgba(0, 0, 0, 0.04)"},E={bgPage:"#121212",bgCard:"#1e1e1e",bgHeader:"#1e1e1e",bgSidebar:"#121212",bgInput:"#2d2d2d",bgDropdown:"#2d2d2d",textPrimary:"#e0e0e0",textSecondary:"#a0a0a0",textInverted:"#000000",primary:"#64b5f6",success:"#81c784",warning:"#ffb74d",error:"#e57373",border:"#333333",divider:"#2d2d2d",shadowCard:"0 4px 12px rgba(0, 0, 0, 0.3)"},m={id:"default",name:"Default",isBuiltIn:!0,description:"Standard Evolusion theme",light:k,dark:E},I=[m];function x(a){return a.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`)}function D(a){return`:root {
${Object.entries(a).map(([e,t])=>`  ${`--${x(e)}`}: ${t};`).join(`
`)}
}`}const u="evolusion_theme_settings",l={mode:"auto",activeThemeId:"default",schedule:{darkStart:"22:00",darkEnd:"07:00"}};function T(){const{subscribe:a,set:r,update:e}=i(l);return{subscribe:a,set:r,update:e,init:()=>{try{const t=localStorage.getItem(u);if(t){const s=JSON.parse(t);r({...l,...s})}}catch(t){console.error("Failed to load theme settings",t)}},save:t=>{localStorage.setItem(u,JSON.stringify(t)),r(t)}}}const n=T(),f=i(!1),b=i(!1);{const a=window.matchMedia("(prefers-color-scheme: dark)");f.set(a.matches),a.addEventListener("change",e=>f.set(e.matches));const r=()=>{const e=w(n);if(e.mode!=="schedule")return;const t=new Date,s=t.getHours()*60+t.getMinutes(),[h,p]=e.schedule.darkStart.split(":").map(Number),[S,v]=e.schedule.darkEnd.split(":").map(Number),d=h*60+p,o=S*60+v;let c=!1;d<o?c=s>=d&&s<o:c=s>=d||s<o,b.set(c)};setInterval(r,6e4),n.subscribe(()=>r())}const y=g([n,f,b],([a,r,e])=>{switch(a.mode){case"day":return!1;case"night":return!0;case"auto":return r;case"schedule":return e;default:return!1}}),H=g([n,y],([a,r])=>{const e=I.find(s=>s.id===a.activeThemeId)||m,t=r?e.dark:e.light;return D(t)});export{H as c,n as t};
