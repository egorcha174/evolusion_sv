import{O as k,n as I,Q as Z,R as D,T as $,U as G,a as V,b as J,V as K,W as P,X as Y,y as O,Y as M,Z as j,_ as ee,$ as L,o as re,a0 as y,a1 as ne,a2 as F,a3 as ae,a4 as U,a5 as fe,a6 as le,a7 as ie,a8 as ue,a9 as w,aa as q,ab as B,ac as H,ad as se,ae as oe,af as te}from"./DSgXCWLr.js";function ve(e,l,f){for(var c=[],g=l.length,u,i=l.length,n=0;n<g;n++){let s=l[n];B(s,()=>{if(u){if(u.pending.delete(s),u.done.add(s),u.pending.size===0){var d=e.outrogroups;z(F(u.done)),d.delete(u),d.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var o=c.length===0&&f!==null;if(o){var a=f,t=a.parentNode;oe(t),t.append(a),e.items.clear()}z(l,!o)}else u={pending:new Set(l),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(u)}function z(e,l=!0){for(var f=0;f<e.length;f++)te(e[f],l)}var X;function ge(e,l,f,c,g,u=null){var i=e,n=new Map;{var o=e;i=I?k(Z(o)):o.appendChild(D())}I&&$();var a=null,t=J(()=>{var p=f();return ae(p)?p:p==null?[]:F(p)}),s,d=!0;function N(){_.fallback=a,ce(_,s,i,l,c),a!==null&&(s.length===0?a.f&w?(a.f^=w,x(a,null,i)):q(a):B(a,()=>{a=null}))}var r=G(()=>{s=V(t);var p=s.length;let E=!1;if(I){var h=K(i)===P;h!==(p===0)&&(i=Y(),k(i),O(!1),E=!0)}for(var R=new Set,T=re,A=ne(),m=0;m<p;m+=1){I&&M.nodeType===j&&M.data===ee&&(i=M,E=!0,O(!1));var S=s[m],C=c(S,m),v=d?null:n.get(C);v?(v.v&&L(v.v,S),v.i&&L(v.i,m),A&&T.skipped_effects.delete(v.e)):(v=de(n,d?i:X??(X=D()),S,C,m,g,l,f),d||(v.e.f|=w),n.set(C,v)),R.add(C)}if(p===0&&u&&!a&&(d?a=y(()=>u(i)):(a=y(()=>u(X??(X=D()))),a.f|=w)),I&&p>0&&k(Y()),!d)if(A){for(const[Q,W]of n)R.has(Q)||T.skipped_effects.add(W.e);T.oncommit(N),T.ondiscard(()=>{})}else N();E&&O(!0),V(t)}),_={effect:r,items:n,outrogroups:null,fallback:a};d=!1,I&&(i=M)}function ce(e,l,f,c,g){var C;var u=l.length,i=e.items,n=e.effect.first,o,a=null,t=[],s=[],d,N,r,_;for(_=0;_<u;_+=1){if(d=l[_],N=g(d,_),r=i.get(N).e,e.outrogroups!==null)for(const v of e.outrogroups)v.pending.delete(r),v.done.delete(r);if(r.f&w)if(r.f^=w,r===n)x(r,null,f);else{var p=a?a.next:n;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),b(e,a,r),b(e,r,p),x(r,p,f),a=r,t=[],s=[],n=a.next;continue}if(r.f&H&&q(r),r!==n){if(o!==void 0&&o.has(r)){if(t.length<s.length){var E=s[0],h;a=E.prev;var R=t[0],T=t[t.length-1];for(h=0;h<t.length;h+=1)x(t[h],E,f);for(h=0;h<s.length;h+=1)o.delete(s[h]);b(e,R.prev,T.next),b(e,a,R),b(e,T,E),n=E,a=T,_-=1,t=[],s=[]}else o.delete(r),x(r,n,f),b(e,r.prev,r.next),b(e,r,a===null?e.effect.first:a.next),b(e,a,r),a=r;continue}for(t=[],s=[];n!==null&&n!==r;)(o??(o=new Set)).add(n),s.push(n),n=n.next;if(n===null)continue}r.f&w||t.push(r),a=r,n=r.next}if(e.outrogroups!==null){for(const v of e.outrogroups)v.pending.size===0&&(z(F(v.done)),(C=e.outrogroups)==null||C.delete(v));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||o!==void 0){var A=[];if(o!==void 0)for(r of o)r.f&H||A.push(r);for(;n!==null;)!(n.f&H)&&n!==e.fallback&&A.push(n),n=n.next;var m=A.length;if(m>0){var S=u===0?f:null;ve(e,A,S)}}}function de(e,l,f,c,g,u,i,n){var o=i&ie?i&ue?U(f):fe(f,!1,!1):null,a=i&le?U(g):null;return{v:o,i:a,e:y(()=>(u(l,o??f,a??g,n),()=>{e.delete(c)}))}}function x(e,l,f){if(e.nodes)for(var c=e.nodes.start,g=e.nodes.end,u=l&&!(l.f&w)?l.nodes.start:f;c!==null;){var i=se(c);if(u.before(c),c===g)return;c=i}}function b(e,l,f){l===null?e.effect.first=f:l.next=f,f===null?e.effect.last=l:f.prev=l}function he(e){return e.split(".")[0]}function _e(e){return["light","switch","cover","lock","input_boolean","automation","script"].includes(e)}export{ge as a,he as e,_e as i};
