import{f as R,a as A,c as fe}from"../chunks/DYWGbwQD.js";import{a4 as te,r as O,ae as Ce,X as ae,a0 as Le,I as ke,a as m,b as Ae,a1 as Ne,a2 as Ie,a3 as de,a5 as re,Z as V,an as Me,aN as Re,az as ce,C as Y,Y as oe,$ as Oe,aL as ve,aS as he,al as _e,a6 as De,aT as He,aU as qe,aV as ze,aW as M,U as me,W as ye,aX as ie,aH as Fe,aK as Ve,V as Ye,z as Ue,aP as We,E as Xe,aY as Be,aZ as Ke,a7 as Pe,K as be,O as L,R as S,Q as x,aR as U,ac as X,M as Ee,ad as se,s as B,T as ne}from"../chunks/BWA2oz35.js";import{d as Qe,s as D}from"../chunks/8JZ3AmGw.js";import{i as W,a as Ze,s as pe}from"../chunks/MLiwW76i.js";import{s as Ge,r as Je,b as je}from"../chunks/CdCvGuyU.js";import{h as $e,e as et}from"../chunks/CcKOTbYC.js";import{p as tt}from"../chunks/Dj_5IFaj.js";function at(e,t,i){for(var l=[],u=t.length,o,s=t.length,a=0;a<u;a++){let f=t[a];ye(f,()=>{if(o){if(o.pending.delete(f),o.done.add(f),o.pending.size===0){var y=e.outrogroups;le(ve(o.done)),y.delete(o),y.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var v=l.length===0&&i!==null;if(v){var n=i,c=n.parentNode;Ve(c),c.append(n),e.items.clear()}le(t,!v)}else o={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function le(e,t=!0){for(var i=0;i<e.length;i++)Ye(e[i],t)}var ge;function rt(e,t,i,l,u,o=null){var s=e,a=new Map;{var v=e;s=O?te(Ce(v)):v.appendChild(ae())}O&&Le();var n=null,c=Ae(()=>{var g=i();return he(g)?g:g==null?[]:ve(g)}),f,y=!0;function _(){b.fallback=n,it(b,f,s,t,l),n!==null&&(f.length===0?n.f&M?(n.f^=M,z(n,null,s)):me(n):ye(n,()=>{n=null}))}var r=ke(()=>{f=m(c);var g=f.length;let w=!1;if(O){var d=Ne(s)===Ie;d!==(g===0)&&(s=de(),te(s),re(!1),w=!0)}for(var h=new Set,E=Y,N=Oe(),k=0;k<g;k+=1){O&&V.nodeType===Me&&V.data===Re&&(s=V,w=!0,re(!1));var T=f[k],C=l(T,k),p=y?null:a.get(C);p?(p.v&&ce(p.v,T),p.i&&ce(p.i,k),N&&E.skipped_effects.delete(p.e)):(p=nt(a,y?s:ge??(ge=ae()),T,C,k,u,t,i),y||(p.e.f|=M),a.set(C,p)),h.add(C)}if(g===0&&o&&!n&&(y?n=oe(()=>o(s)):(n=oe(()=>o(ge??(ge=ae()))),n.f|=M)),O&&g>0&&te(de()),!y)if(N){for(const[H,q]of a)h.has(H)||E.skipped_effects.add(q.e);E.oncommit(_),E.ondiscard(()=>{})}else _();w&&re(!0),m(c)}),b={effect:r,items:a,outrogroups:null,fallback:n};y=!1,O&&(s=V)}function it(e,t,i,l,u){var C;var o=t.length,s=e.items,a=e.effect.first,v,n=null,c=[],f=[],y,_,r,b;for(b=0;b<o;b+=1){if(y=t[b],_=u(y,b),r=s.get(_).e,e.outrogroups!==null)for(const p of e.outrogroups)p.pending.delete(r),p.done.delete(r);if(r.f&M)if(r.f^=M,r===a)z(r,null,i);else{var g=n?n.next:a;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),I(e,n,r),I(e,r,g),z(r,g,i),n=r,c=[],f=[],a=n.next;continue}if(r.f&ie&&me(r),r!==a){if(v!==void 0&&v.has(r)){if(c.length<f.length){var w=f[0],d;n=w.prev;var h=c[0],E=c[c.length-1];for(d=0;d<c.length;d+=1)z(c[d],w,i);for(d=0;d<f.length;d+=1)v.delete(f[d]);I(e,h.prev,E.next),I(e,n,h),I(e,E,w),a=w,n=E,b-=1,c=[],f=[]}else v.delete(r),z(r,a,i),I(e,r.prev,r.next),I(e,r,n===null?e.effect.first:n.next),I(e,n,r),n=r;continue}for(c=[],f=[];a!==null&&a!==r;)(v??(v=new Set)).add(a),f.push(a),a=a.next;if(a===null)continue}r.f&M||c.push(r),n=r,a=r.next}if(e.outrogroups!==null){for(const p of e.outrogroups)p.pending.size===0&&(le(ve(p.done)),(C=e.outrogroups)==null||C.delete(p));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||v!==void 0){var N=[];if(v!==void 0)for(r of v)r.f&ie||N.push(r);for(;a!==null;)!(a.f&ie)&&a!==e.fallback&&N.push(a),a=a.next;var k=N.length;if(k>0){var T=o===0?i:null;at(e,N,T)}}}function nt(e,t,i,l,u,o,s,a){var v=s&qe?s&ze?_e(i):De(i,!1,!1):null,n=s&He?_e(u):null;return{v,i:n,e:oe(()=>(o(t,v??i,n??u,a),()=>{e.delete(l)}))}}function z(e,t,i){if(e.nodes)for(var l=e.nodes.start,u=e.nodes.end,o=t&&!(t.f&M)?t.nodes.start:i;l!==null;){var s=Fe(l);if(o.before(l),l===u)return;l=s}}function I(e,t,i){t===null?e.effect.first=i:t.next=i,i===null?e.effect.last=t:i.prev=t}function xe(e,t,i=!1){if(e.multiple){if(t==null)return;if(!he(t))return Be();for(var l of e.options)l.selected=t.includes(F(l));return}for(l of e.options){var u=F(l);if(Ke(u,t)){l.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function ot(e){var t=new MutationObserver(()=>{xe(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Pe(()=>{t.disconnect()})}function st(e,t,i=t){var l=new WeakSet,u=!0;Ue(e,"change",o=>{var s=o?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(s),F);else{var v=e.querySelector(s)??e.querySelector("option:not([disabled])");a=v&&F(v)}i(a),Y!==null&&l.add(Y)}),We(()=>{var o=t();if(e===document.activeElement){var s=Xe??Y;if(l.has(s))return}if(xe(e,o,u),u&&o===void 0){var a=e.querySelector(":checked");a!==null&&(o=F(a),i(o))}e.__value=o,u=!1}),ot(e)}function F(e){return"__value"in e?e.__value:e.value}function Se(e){return e.split(".")[0]}function lt(e){return["light","switch","cover","lock","input_boolean","automation","script"].includes(e)}var vt=R('<button class="action-button svelte-oocbx9"> </button>'),ut=R('<div class="entity-row svelte-oocbx9"><div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id svelte-oocbx9"> </div></div> <div class="entity-state svelte-oocbx9"><div class="state-badge svelte-oocbx9"> </div></div> <!></div>');function ft(e,t){be(t,!0);let i=se(!1);async function l(){B(i,!0),console.log("Toggle entity:",t.entity.entity_id,"current state:",t.entity.state),setTimeout(()=>{B(i,!1)},500)}let u=U(()=>Se(t.entity.entity_id)),o=U(()=>t.entity.attributes.friendly_name||t.entity.entity_id),s=U(()=>lt(m(u)));var a=ut(),v=L(a),n=L(v),c=L(n,!0);S(n);var f=x(n,2),y=L(f,!0);S(f),S(v);var _=x(v,2),r=L(_),b=L(r,!0);S(r),S(_);var g=x(_,2);{var w=d=>{var h=vt();h.__click=l;var E=L(h,!0);S(h),X(()=>{h.disabled=m(i),D(E,m(i)?"...":t.entity.state==="on"?"Off":"On")}),A(d,h)};W(g,d=>{m(s)&&d(w)})}S(a),X(()=>{Ge(a,"data-domain",m(u)),D(c,m(o)),D(y,t.entity.entity_id),D(b,t.entity.state)}),A(e,a),Ee()}Qe(["click"]);var dt=R('<div class="entity-list svelte-t6avkx"></div>');function ct(e,t){let i=tt(t,"entities",19,()=>[]);var l=dt();rt(l,21,i,u=>u.entity_id,(u,o)=>{ft(u,{get entity(){return m(o)}})}),S(l),A(e,l)}var _t=R("<p>Loading entities...</p>"),pt=R('<p class="error svelte-1ipj8go"> </p>'),gt=R("<p>No entities connected. Check your Home Assistant settings.</p>"),ht=R('<div class="filters svelte-1ipj8go"><input type="text" placeholder="Search entities..." class="search-input svelte-1ipj8go"/> <select class="domain-select svelte-1ipj8go"><option>All domains</option><option>Lights</option><option>Switches</option><option>Sensors</option><option>Binary Sensors</option><option>Climate</option><option>Covers</option><option>Media Players</option></select></div> <div class="results-count svelte-1ipj8go"> </div> <!>',1),mt=R('<div class="page-entities svelte-1ipj8go"><h1>All Entities</h1> <!></div>');function Ct(e,t){be(t,!0);const i=()=>pe(et,"$entityList",u),l=()=>pe($e,"$haStore",u),[u,o]=Ze();let s=se(""),a=se(null),v=U(()=>i().filter(_=>{const r=_.entity_id.toLowerCase().includes(m(s).toLowerCase())||(_.attributes.friendly_name||"").toLowerCase().includes(m(s).toLowerCase()),b=Se(_.entity_id),g=!m(a)||b===m(a);return r&&g}));var n=mt(),c=x(L(n),2);{var f=_=>{var r=_t();A(_,r)},y=_=>{var r=fe(),b=ne(r);{var g=d=>{var h=pt(),E=L(h);S(h),X(()=>D(E,`Error: ${l().error??""}`)),A(d,h)},w=d=>{var h=fe(),E=ne(h);{var N=T=>{var C=gt();A(T,C)},k=T=>{var C=ht(),p=ne(C),H=L(p);Je(H);var q=x(H,2),K=L(q);K.value=(K.__value=null)??"";var P=x(K);P.value=P.__value="light";var Q=x(P);Q.value=Q.__value="switch";var Z=x(Q);Z.value=Z.__value="sensor";var G=x(Z);G.value=G.__value="binary_sensor";var J=x(G);J.value=J.__value="climate";var j=x(J);j.value=j.__value="cover";var ue=x(j);ue.value=ue.__value="media_player",S(q),S(p);var $=x(p,2),we=L($);S($);var Te=x($,2);ct(Te,{get entities(){return m(v)}}),X(()=>D(we,`Showing ${m(v).length??""} of ${i().length??""} entities`)),je(H,()=>m(s),ee=>B(s,ee)),st(q,()=>m(a),ee=>B(a,ee)),A(T,C)};W(E,T=>{i().length===0?T(N):T(k,!1)},!0)}A(d,h)};W(b,d=>{l().error?d(g):d(w,!1)},!0)}A(_,r)};W(c,_=>{l().isLoading?_(f):_(y,!1)})}S(n),A(e,n),Ee(),o()}export{Ct as component};
