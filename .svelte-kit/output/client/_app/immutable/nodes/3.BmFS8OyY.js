import{d as ne,f as y,s as L,a as p,c as $}from"../chunks/DnPsic_2.js";import{m as le,o as X,ay as ve,q as ue,a3 as de,az as _e,aA as ce,aw as fe,aj as te,ak as u,ap as l,al as o,a as i,an as N,aB as M,aq as T,am as ae,s as k,ar as Y}from"../chunks/DSgXCWLr.js";import{i as A,a as pe,s as ee}from"../chunks/BmkM1kkP.js";import{s as me,r as ge}from"../chunks/DdcvJlIk.js";import{b as ye}from"../chunks/B68l2row.js";import{t as he,h as be,e as xe}from"../chunks/GskcscAL.js";import{e as ie,i as we,a as Se}from"../chunks/DG73ZNUW.js";import{p as Le}from"../chunks/D4tnr7Gc.js";function re(e,t,r=!1){if(e.multiple){if(t==null)return;if(!de(t))return _e();for(var a of e.options)a.selected=t.includes(D(a));return}for(a of e.options){var s=D(a);if(ce(s,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ke(e){var t=new MutationObserver(()=>{re(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fe(()=>{t.disconnect()})}function je(e,t,r=t){var a=new WeakSet,s=!0;le(e,"change",n=>{var c=n?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(c),D);else{var m=e.querySelector(c)??e.querySelector("option:not([disabled])");v=m&&D(m)}r(v),X!==null&&a.add(X)}),ve(()=>{var n=t();if(e===document.activeElement){var c=ue??X;if(a.has(c))return}if(re(e,n,s),s&&n===void 0){var v=e.querySelector(":checked");v!==null&&(n=D(v),r(n))}e.__value=n,s=!1}),ke(e)}function D(e){return"__value"in e?e.__value:e.value}var qe=y('<div class="error-text svelte-oocbx9"> </div>'),Ce=y('<button class="action-button svelte-oocbx9"> </button>'),Ee=y('<div class="entity-row svelte-oocbx9"><div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id svelte-oocbx9"> </div> <!></div> <div class="entity-state svelte-oocbx9"><div class="state-badge svelte-oocbx9"> </div></div> <!></div>');function Te(e,t){te(t,!0);let r=N(!1),a=N(null);async function s(){try{k(r,!0),k(a,null),await he(t.entity.entity_id)}catch(_){console.error("Toggle error:",_),k(a,_.message||"Toggle failed",!0)}finally{k(r,!1)}}let n=M(()=>ie(t.entity.entity_id)),c=M(()=>t.entity.attributes.friendly_name||t.entity.entity_id),v=M(()=>we(i(n)));var m=Ee(),w=u(m),j=u(w),z=u(j,!0);l(j);var q=o(j,2),d=u(q,!0);l(q);var h=o(q,2);{var C=_=>{var f=qe(),g=u(f,!0);l(f),T(()=>L(g,i(a))),p(_,f)};A(h,_=>{i(a)&&_(C)})}l(w);var S=o(w,2),O=u(S),b=u(O,!0);l(O),l(S);var x=o(S,2);{var E=_=>{var f=Ce();f.__click=s;var g=u(f,!0);l(f),T(()=>{f.disabled=i(r),L(g,i(r)?"...":t.entity.state==="on"?"Off":"On")}),p(_,f)};A(x,_=>{i(v)&&_(E)})}l(m),T(()=>{me(m,"data-domain",i(n)),L(z,i(c)),L(d,t.entity.entity_id),L(b,t.entity.state)}),p(e,m),ae()}ne(["click"]);var Ae=y('<div class="entity-list svelte-t6avkx"></div>');function De(e,t){let r=Le(t,"entities",19,()=>[]);var a=Ae();Se(a,21,r,s=>s.entity_id,(s,n)=>{Te(s,{get entity(){return i(n)}})}),l(a),p(e,a)}var Oe=y("<p>Loading entities...</p>"),Be=y('<p class="error svelte-1ipj8go"> </p>'),Me=y("<p>No entities connected. Check your Home Assistant settings.</p>"),Ne=y('<div class="filters svelte-1ipj8go"><input type="text" placeholder="Search entities..." class="search-input svelte-1ipj8go"/> <select class="domain-select svelte-1ipj8go"><option>All domains</option><option>Lights</option><option>Switches</option><option>Sensors</option><option>Binary Sensors</option><option>Climate</option><option>Covers</option><option>Media Players</option></select></div> <div class="results-count svelte-1ipj8go"> </div> <!>',1),ze=y('<div class="page-entities svelte-1ipj8go"><h1>All Entities</h1> <!></div>');function Je(e,t){te(t,!0);const r=()=>ee(xe,"$entityList",s),a=()=>ee(be,"$haStore",s),[s,n]=pe();let c=N(""),v=N(null),m=M(()=>r().filter(d=>{const h=d.entity_id.toLowerCase().includes(i(c).toLowerCase())||(d.attributes.friendly_name||"").toLowerCase().includes(i(c).toLowerCase()),C=ie(d.entity_id),S=!i(v)||C===i(v);return h&&S}));var w=ze(),j=o(u(w),2);{var z=d=>{var h=Oe();p(d,h)},q=d=>{var h=$(),C=Y(h);{var S=b=>{var x=Be(),E=u(x);l(x),T(()=>L(E,`Error: ${a().error??""}`)),p(b,x)},O=b=>{var x=$(),E=Y(x);{var _=g=>{var B=Me();p(g,B)},f=g=>{var B=Ne(),F=Y(B),H=u(F);ge(H);var I=o(H,2),P=u(I);P.value=(P.__value=null)??"";var Q=o(P);Q.value=Q.__value="light";var R=o(Q);R.value=R.__value="switch";var W=o(R);W.value=W.__value="sensor";var G=o(W);G.value=G.__value="binary_sensor";var J=o(G);J.value=J.__value="climate";var K=o(J);K.value=K.__value="cover";var Z=o(K);Z.value=Z.__value="media_player",l(I),l(F);var U=o(F,2),oe=u(U);l(U);var se=o(U,2);De(se,{get entities(){return i(m)}}),T(()=>L(oe,`Showing ${i(m).length??""} of ${r().length??""} entities`)),ye(H,()=>i(c),V=>k(c,V)),je(I,()=>i(v),V=>k(v,V)),p(g,B)};A(E,g=>{r().length===0?g(_):g(f,!1)},!0)}p(b,x)};A(C,b=>{a().error?b(S):b(O,!1)},!0)}p(d,h)};A(j,d=>{a().isLoading?d(z):d(q,!1)})}l(w),p(e,w),ae(),n()}export{Je as component};
