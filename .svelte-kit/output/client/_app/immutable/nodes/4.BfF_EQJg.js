import{d as ie,f as D,a as w,s as re}from"../chunks/Bgs4iDMG.js";import{H as oe,z as le,a as i,s as t,I as s,J as r,K as R,M as ne,O as h,Q as o,R as I}from"../chunks/D78c_VIb.js";import{s as K,i as N,a as ce}from"../chunks/DcjxvNrN.js";import{r as f,s as P}from"../chunks/DLuiIGct.js";import{a as ve,s as de,b as ue}from"../chunks/7KTPuhQd.js";import{i as pe,b as Q,s as _e}from"../chunks/fuqYoDOe.js";import{t as m}from"../chunks/CAosh53G.js";var me=D('<div class="schedule-inputs svelte-1i19ct2"><div class="form-group svelte-1i19ct2"><label for="dark-start" class="svelte-1i19ct2">Dark Mode Start</label> <input type="time" id="dark-start" class="svelte-1i19ct2"/></div> <div class="form-group svelte-1i19ct2"><label for="dark-end" class="svelte-1i19ct2">Dark Mode End</label> <input type="time" id="dark-end" class="svelte-1i19ct2"/></div></div>'),he=D("<div> </div>"),fe=D('<div class="settings-container svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Appearance</h2> <div class="form-group svelte-1i19ct2"><label for="theme-mode" class="svelte-1i19ct2">Theme Mode</label> <select id="theme-mode" class="svelte-1i19ct2"><option>Auto (System)</option><option>Day (Always Light)</option><option>Night (Always Dark)</option><option>Schedule</option></select></div> <!></section> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Connection</h2> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2">Server URL</label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2">Long-Lived Access Token</label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">Test Connection</button> <button class="btn-primary svelte-1i19ct2">Save Configuration</button></div> <!></section></div>');function Ce(W,j){oe(j,!0);const g=()=>K(ve,"$appState",H),_=()=>K(m,"$themeSettings",H),[H,B]=ce();let v=h(""),d=h(""),n=h(""),u=h("info");le(()=>{g().activeServer&&i(v)===""&&i(d)===""&&(t(v,g().activeServer.url,!0),t(d,g().activeServer.token,!0))});async function V(){if(t(n,""),!i(v)){t(n,"Server URL is required."),t(u,"error");return}if(!i(d)){t(n,"Access Token is required."),t(u,"error");return}let e=i(v).trim();e.endsWith("/")&&(e=e.slice(0,-1));const a={url:e,token:i(d).trim(),name:"Home Assistant"};try{await de(a),t(n,"Configuration saved securely."),t(u,"success")}catch{t(n,"Failed to save configuration."),t(u,"error")}}function X(){if(t(n,""),!i(v)||!i(d)){t(n,"Please enter URL and Token first."),t(u,"error");return}t(n,"Ready to connect (Mock)"),t(u,"info")}function Y(e){const a=e.target.value;m.update(l=>{const c={...l,mode:a};return m.save(c),c})}function U(e,a){m.update(l=>{const c={...l,schedule:{...l.schedule,[e]:a}};return m.save(c),c})}var b=fe(),k=s(r(b),2),S=s(r(k),2),p=s(r(S),2);p.__change=Y;var y=r(p);y.value=y.__value="auto";var T=s(y);T.value=T.__value="day";var A=s(T);A.value=A.__value="night";var E=s(A);E.value=E.__value="schedule",o(p);var q;pe(p),o(S);var Z=s(S,2);{var ee=e=>{var a=me(),l=r(a),c=s(r(l),2);f(c),c.__change=M=>U("darkStart",M.currentTarget.value),o(l);var G=s(l,2),L=s(r(G),2);f(L),L.__change=M=>U("darkEnd",M.currentTarget.value),o(G),o(a),R(()=>{P(c,_().schedule.darkStart),P(L,_().schedule.darkEnd)}),w(e,a)};N(Z,e=>{_().mode==="schedule"&&e(ee)})}o(k);var J=s(k,2),C=s(r(J),4),O=s(r(C),2);f(O),I(2),o(C);var $=s(C,2),z=s(r($),2);f(z),I(2),o($);var x=s($,2),F=r(x);F.__click=X;var te=s(F,2);te.__click=V,o(x);var se=s(x,2);{var ae=e=>{var a=he(),l=r(a,!0);o(a),R(()=>{ue(a,1,`message ${i(u)??""}`,"svelte-1i19ct2"),re(l,i(n))}),w(e,a)};N(se,e=>{i(n)&&e(ae)})}o(J),o(b),R(()=>{q!==(q=_().mode)&&(p.value=(p.__value=_().mode)??"",_e(p,_().mode))}),Q(O,()=>i(v),e=>t(v,e)),Q(z,()=>i(d),e=>t(d,e)),w(W,b),ne(),B()}ie(["change","click"]);export{Ce as component};
