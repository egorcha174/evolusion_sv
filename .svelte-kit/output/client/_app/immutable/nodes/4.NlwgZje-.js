import{d as ta,f as w,a as y,s as v}from"../chunks/Ce4_kbAy.js";import{B as aa,C as p,c as x,v as sa,a as l,s as o,F as i,G as a,H as S,I as ia,J as t,K as U,M as la,N as ra}from"../chunks/CM9YBULs.js";import{s as P,i as D,a as oa}from"../chunks/BlMTQ3nd.js";import{e as ot,b as ca,s as va,$ as na,i as ct,r as m,c as vt}from"../chunks/3QiWljis.js";import{s as ua}from"../chunks/9tXmumpb.js";import{i as He,b as nt,a as ut,c as H,s as We,d as dt}from"../chunks/CZ7GPu7O.js";import{b as da}from"../chunks/86kbj1ft.js";import{w as _t,t as X,s as _a,i as pa,r as ma,c as ha,a as ga,b as fa,d as ba}from"../chunks/j97TzuOC.js";var ya=w("<option> </option>"),wa=w("<option> </option>"),xa=w('<div class="schedule-inputs svelte-1i19ct2"><div class="form-group svelte-1i19ct2"><label for="day-start" class="svelte-1i19ct2">Day Start</label> <input type="time" id="day-start" class="svelte-1i19ct2"/></div> <div class="form-group svelte-1i19ct2"><label for="night-start" class="svelte-1i19ct2">Night Start</label> <input type="time" id="night-start" class="svelte-1i19ct2"/></div></div>'),Sa=w('<div class="form-group svelte-1i19ct2"><label for="w-key" class="svelte-1i19ct2">API Key</label> <input id="w-key" type="password" placeholder="Paste your API key here" class="svelte-1i19ct2"/></div>'),ka=w('<div class="form-group svelte-1i19ct2"><label for="w-days" class="svelte-1i19ct2"> </label> <input id="w-days" type="range" min="1" max="7" step="1" class="svelte-1i19ct2"/></div> <div class="form-group svelte-1i19ct2"><label class="svelte-1i19ct2">Forecast Layout</label> <div class="radio-group svelte-1i19ct2"><label class="svelte-1i19ct2"><input type="radio" class="svelte-1i19ct2"/> Vertical</label> <label class="svelte-1i19ct2"><input type="radio" class="svelte-1i19ct2"/> Horizontal</label></div></div>',1),La=w('<div class="schedule-inputs svelte-1i19ct2"><div class="form-group svelte-1i19ct2"><label for="w-lat" class="svelte-1i19ct2">Latitude</label> <input id="w-lat" type="number" step="0.0001" class="svelte-1i19ct2"/></div> <div class="form-group svelte-1i19ct2"><label for="w-lon" class="svelte-1i19ct2">Longitude</label> <input id="w-lon" type="number" step="0.0001" class="svelte-1i19ct2"/></div></div>'),$a=w('<div class="info-box svelte-1i19ct2"><p>Using location from Home Assistant (zone.home):</p> <code class="svelte-1i19ct2"> </code></div>'),Ca=w('<div class="message error svelte-1i19ct2"> </div>'),Ia=w("<div> </div>"),Ma=w('<div class="settings-panel svelte-1i19ct2"><h1 class="svelte-1i19ct2"> </h1> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2"> </h2> <div class="form-group svelte-1i19ct2"><label for="lang-select" class="svelte-1i19ct2"> </label> <select id="lang-select" class="svelte-1i19ct2"></select></div> <div class="form-group svelte-1i19ct2"><label for="lang-import" class="svelte-1i19ct2"> </label> <div class="file-upload"><input type="file" id="lang-import" accept=".json" class="svelte-1i19ct2"/></div></div> <div class="divider svelte-1i19ct2"></div> <div class="form-group svelte-1i19ct2"><label for="theme-mode" class="svelte-1i19ct2"> </label> <select id="theme-mode" class="svelte-1i19ct2"><option> </option><option> </option><option> </option><option> </option></select></div> <div class="form-group svelte-1i19ct2"><label for="theme-select" class="svelte-1i19ct2"> </label> <select id="theme-select" class="svelte-1i19ct2"></select></div> <!></section> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2"> </h2> <div class="form-group svelte-1i19ct2"><label for="w-provider" class="svelte-1i19ct2">Provider</label> <select id="w-provider" class="svelte-1i19ct2"><option>Open-Meteo (Free, No Key)</option><option>OpenWeatherMap (Key Required)</option><option>WeatherAPI (Key Required)</option></select></div> <!> <div class="form-group checkbox-group svelte-1i19ct2"><label class="svelte-1i19ct2"><input type="checkbox" class="svelte-1i19ct2"/> Show Multi-day Forecast</label></div> <!> <div class="form-group svelte-1i19ct2"><label for="w-icon-pack" class="svelte-1i19ct2">Icon Pack</label> <select id="w-icon-pack" class="svelte-1i19ct2"><option>Default</option><option>Outline</option><option>Filled</option></select></div> <div class="form-group checkbox-group svelte-1i19ct2"><label class="svelte-1i19ct2"><input type="checkbox" class="svelte-1i19ct2"/> Use Custom Coordinates</label></div> <!> <div class="actions svelte-1i19ct2"><button class="btn-primary svelte-1i19ct2">Update Weather</button></div> <!></section> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2"> </h2> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2"> </label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2"> </label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2"> </button> <button class="btn-primary svelte-1i19ct2"> </button></div> <!></section></div>');function Wa(pt,mt){var lt,rt;aa(mt,!0);const f=()=>P(_t,"$weatherSettings",k),Y=()=>P(ca,"$appState",k),n=()=>P(na,"$t",k),h=()=>P(X,"$themeStore",k),Z=()=>P(ha,"$currentLang",k),ht=()=>P(ga,"$availableLanguages",k),Re=()=>P(fa,"$weatherStore",k),[k,gt]=oa(),qe=[];let L=p(""),$=p(""),_=p(""),b=p("info"),z=p(x(f().provider)),ee=p(x(f().apiKey||"")),G=p(x(f().useCustomLocation)),te=p(x(((lt=f().customLocation)==null?void 0:lt.lat)??55.1644)),ae=p(x(((rt=f().customLocation)==null?void 0:rt.lon)??61.4368)),J=p(x(f().showForecast)),j=p(x(f().forecastDays)),se=p(x(f().iconPack)),W=p(x(f().forecastLayout)),ie=ra(()=>ba(f())),B;sa(()=>{Y().activeServer&&l(L)===""&&l($)===""&&(o(L,Y().activeServer.url,!0),o($,Y().activeServer.token,!0))});async function ft(){if(o(_,""),!l(L)){o(_,"Server URL is required."),o(b,"error");return}if(!l($)){o(_,"Access Token is required."),o(b,"error");return}let e=l(L).trim();e.endsWith("/")&&(e=e.slice(0,-1));const s={url:e,token:l($).trim(),name:"Home Assistant"};try{await va(s),o(_,n()("common.save"),!0),o(b,"success")}catch{o(_,n()("common.error"),!0),o(b,"error")}}function bt(){if(o(_,""),!l(L)||!l($)){o(_,"Please enter URL and Token first."),o(b,"error");return}o(_,"Ready to connect (Mock)"),o(b,"info")}function yt(e){const s=e.target.value;X.setMode(s)}function wt(e){const s=e.target.value;X.setTheme(s)}function Ne(e,s){const c={...h().schedule||{mode:"time",dayStart:"07:00",nightStart:"22:00"},[e]:s};X.setSchedule(c)}function xt(e){const s=e.target.value;_a(s)}async function St(e){var r;const s=(r=e.target.files)==null?void 0:r[0];if(s)try{const c=await s.text();pa(c)?(o(_,"Language imported successfully"),o(b,"success"),B&&(B.value="")):(o(_,"Failed to import language: Invalid format"),o(b,"error"))}catch(c){console.error(c),o(_,"Failed to read file"),o(b,"error")}}function kt(){const e=Math.max(1,Math.min(l(j),7));_t.update(s=>({...s,provider:l(z),apiKey:l(ee),useCustomLocation:l(G),customLocation:{lat:l(te),lon:l(ae)},showForecast:l(J),forecastDays:e,iconPack:l(se),forecastLayout:l(W)})),ma()}var le=Ma(),re=a(le),Lt=a(re,!0);t(re);var oe=i(re,2),ce=a(oe),$t=a(ce,!0);t(ce);var ve=i(ce,2),ne=a(ve),Ct=a(ne,!0);t(ne);var C=i(ne,2);C.__change=xt,ot(C,5,ht,ct,(e,s)=>{var r=ya(),c=a(r,!0);t(r);var u={};S(()=>{v(c,l(s).name),u!==(u=l(s).code)&&(r.value=(r.__value=l(s).code)??"")}),y(e,r)}),t(C);var Oe;He(C),t(ve);var ue=i(ve,2),de=a(ue),It=a(de,!0);t(de);var ze=i(de,2),Ge=a(ze);Ge.__change=St,da(Ge,e=>B=e,()=>B),t(ze),t(ue);var _e=i(ue,4),pe=a(_e),Mt=a(pe,!0);t(pe);var I=i(pe,2);I.__change=yt;var R=a(I),Tt=a(R,!0);t(R),R.value=R.__value="auto";var q=i(R),Ft=a(q,!0);t(q),q.value=q.__value="day";var N=i(q),Pt=a(N,!0);t(N),N.value=N.__value="night";var V=i(N),At=a(V,!0);t(V),V.value=V.__value="schedule",t(I);var Je;He(I),t(_e);var me=i(_e,2),he=a(me),Kt=a(he,!0);t(he);var M=i(he,2);M.__change=wt,ot(M,5,()=>h().availableThemes,ct,(e,s)=>{var r=wa(),c=a(r);t(r);var u={};S(()=>{v(c,`${l(s).name??""} ${l(s).isCustom?"(Custom)":""}`),u!==(u=l(s).id)&&(r.value=(r.__value=l(s).id)??"")}),y(e,r)}),t(M);var je;He(M),t(me);var Ut=i(me,2);{var Dt=e=>{var s=xa(),r=a(s),c=i(a(r),2);m(c),c.__change=d=>Ne("dayStart",d.currentTarget.value),t(r);var u=i(r,2),g=i(a(u),2);m(g),g.__change=d=>Ne("nightStart",d.currentTarget.value),t(u),t(s),S(()=>{var d,T;vt(c,((d=h().schedule)==null?void 0:d.dayStart)||"07:00"),vt(g,((T=h().schedule)==null?void 0:T.nightStart)||"22:00")}),y(e,s)};D(Ut,e=>{h().mode==="schedule"&&e(Dt)})}t(oe);var ge=i(oe,2),fe=a(ge),Ht=a(fe,!0);t(fe);var be=i(fe,2),ye=i(a(be),2),we=a(ye);we.value=we.__value="openmeteo";var xe=i(we);xe.value=xe.__value="openweathermap";var Be=i(xe);Be.value=Be.__value="weatherapi",t(ye),t(be);var Ve=i(be,2);{var Wt=e=>{var s=Sa(),r=i(a(s),2);m(r),t(s),H(r,()=>l(ee),c=>o(ee,c)),y(e,s)};D(Ve,e=>{l(z)!=="openmeteo"&&e(Wt)})}var Se=i(Ve,2),Ee=a(Se),Qe=a(Ee);m(Qe),U(),t(Ee),t(Se);var Xe=i(Se,2);{var Rt=e=>{var s=ka(),r=la(s),c=a(r),u=a(c);t(c);var g=i(c,2);m(g),t(r);var d=i(r,2),T=i(a(d),2),O=a(T),A=a(O);m(A),A.value=A.__value="vertical",U(),t(O);var Q=i(O,2),K=a(Q);m(K),K.value=K.__value="horizontal",U(),t(Q),t(T),t(d),S(()=>v(u,`Forecast Days: ${l(j)??""}`)),H(g,()=>l(j),F=>o(j,F)),dt(qe,[],A,()=>l(W),F=>o(W,F)),dt(qe,[],K,()=>l(W),F=>o(W,F)),y(e,s)};D(Xe,e=>{l(J)&&e(Rt)})}var ke=i(Xe,2),Le=i(a(ke),2),$e=a(Le);$e.value=$e.__value="default";var Ce=i($e);Ce.value=Ce.__value="outline";var Ye=i(Ce);Ye.value=Ye.__value="filled",t(Le),t(ke);var Ie=i(ke,2),Ze=a(Ie),et=a(Ze);m(et),U(),t(Ze),t(Ie);var tt=i(Ie,2);{var qt=e=>{var s=La(),r=a(s),c=i(a(r),2);m(c),t(r);var u=i(r,2),g=i(a(u),2);m(g),t(u),t(s),H(c,()=>l(te),d=>o(te,d)),H(g,()=>l(ae),d=>o(ae,d)),y(e,s)},Nt=e=>{var s=$a(),r=i(a(s),2),c=a(r);t(r),t(s),S(()=>v(c,`${l(ie).name??""}: ${l(ie).lat??""}, ${l(ie).lon??""}`)),y(e,s)};D(tt,e=>{l(G)?e(qt):e(Nt,!1)})}var Me=i(tt,2),Ot=a(Me);Ot.__click=kt,t(Me);var zt=i(Me,2);{var Gt=e=>{var s=Ca(),r=a(s,!0);t(s),S(()=>v(r,Re().error)),y(e,s)};D(zt,e=>{Re().error&&e(Gt)})}t(ge);var at=i(ge,2),Te=a(at),Jt=a(Te,!0);t(Te);var Fe=i(Te,4),Pe=a(Fe),jt=a(Pe,!0);t(Pe);var st=i(Pe,2);m(st),U(2),t(Fe);var Ae=i(Fe,2),Ke=a(Ae),Bt=a(Ke,!0);t(Ke);var it=i(Ke,2);m(it),U(2),t(Ae);var Ue=i(Ae,2),E=a(Ue);E.__click=bt;var Vt=a(E,!0);t(E);var De=i(E,2);De.__click=ft;var Et=a(De,!0);t(De),t(Ue);var Qt=i(Ue,2);{var Xt=e=>{var s=Ia(),r=a(s,!0);t(s),S(()=>{ua(s,1,`message ${l(b)??""}`,"svelte-1i19ct2"),v(r,l(_))}),y(e,s)};D(Qt,e=>{l(_)&&e(Xt)})}t(at),t(le),S((e,s,r,c,u,g,d,T,O,A,Q,K,F,Yt,Zt,ea)=>{v(Lt,e),v($t,s),v(Ct,r),Oe!==(Oe=Z())&&(C.value=(C.__value=Z())??"",We(C,Z())),v(It,c),v(Mt,u),v(Tt,g),v(Ft,d),v(Pt,T),v(At,O),Je!==(Je=h().mode)&&(I.value=(I.__value=h().mode)??"",We(I,h().mode)),v(Kt,A),je!==(je=h().currentThemeId)&&(M.value=(M.__value=h().currentThemeId)??"",We(M,h().currentThemeId)),v(Ht,Q),v(Jt,K),v(jt,F),v(Bt,Yt),v(Vt,Zt),v(Et,ea)},[()=>n()("settings.title"),()=>n()("settings.appearance"),()=>n()("settings.languageSelect"),()=>n()("settings.importLanguage"),()=>n()("settings.themeMode"),()=>n()("settings.themeModeAuto"),()=>n()("settings.themeModeDay"),()=>n()("settings.themeModeNight"),()=>n()("settings.themeModeSchedule"),()=>n()("settings.theme"),()=>n()("settings.weather"),()=>n()("settings.connection"),()=>n()("settings.serverUrl"),()=>n()("settings.token"),()=>n()("settings.testConnection"),()=>n()("settings.saveConfig")]),nt(ye,()=>l(z),e=>o(z,e)),ut(Qe,()=>l(J),e=>o(J,e)),nt(Le,()=>l(se),e=>o(se,e)),ut(et,()=>l(G),e=>o(G,e)),H(st,()=>l(L),e=>o(L,e)),H(it,()=>l($),e=>o($,e)),y(pt,le),ia(),gt()}ta(["change","click"]);export{Wa as component};
