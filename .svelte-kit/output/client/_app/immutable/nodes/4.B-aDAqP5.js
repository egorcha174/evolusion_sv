import{d as de,f as y,a as g,s as P}from"../chunks/Y60M5pzQ.js";import{z as ue,m as pe,a as r,s as i,A as s,B as c,C as b,E as _e,F as k,G as o,H as W}from"../chunks/CXj4HnGG.js";import{s as j,i as K,a as me}from"../chunks/BAi1BYcP.js";import{e as he,i as fe,r as S,s as Q}from"../chunks/CG6x82nw.js";import{a as ge,s as be,b as ke}from"../chunks/D2HSl2lh.js";import{i as V,b as X,s as Y}from"../chunks/CWKor5o7.js";import{t as h,B as Se}from"../chunks/DNRF0dfF.js";var ye=y("<option> </option>"),Te=y('<div class="schedule-inputs svelte-1i19ct2"><div class="form-group svelte-1i19ct2"><label for="dark-start" class="svelte-1i19ct2">Dark Mode Start</label> <input type="time" id="dark-start" class="svelte-1i19ct2"/></div> <div class="form-group svelte-1i19ct2"><label for="dark-end" class="svelte-1i19ct2">Dark Mode End</label> <input type="time" id="dark-end" class="svelte-1i19ct2"/></div></div>'),Ce=y("<div> </div>"),Ae=y('<div class="settings-container svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Appearance</h2> <div class="form-group svelte-1i19ct2"><label for="theme-mode" class="svelte-1i19ct2">Mode</label> <select id="theme-mode" class="svelte-1i19ct2"><option>Auto (System)</option><option>Day (Always Light)</option><option>Night (Always Dark)</option><option>Schedule</option></select></div> <div class="form-group svelte-1i19ct2"><label for="theme-select" class="svelte-1i19ct2">Theme</label> <select id="theme-select" class="svelte-1i19ct2"></select></div> <!></section> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Connection</h2> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2">Server URL</label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2">Long-Lived Access Token</label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">Test Connection</button> <button class="btn-primary svelte-1i19ct2">Save Configuration</button></div> <!></section></div>');function He(Z,ee){ue(ee,!0);const T=()=>j(ge,"$appState",R),v=()=>j(h,"$themeSettings",R),[R,te]=me();let d=k(""),u=k(""),n=k(""),p=k("info");pe(()=>{T().activeServer&&r(d)===""&&r(u)===""&&(i(d,T().activeServer.url,!0),i(u,T().activeServer.token,!0))});async function se(){if(i(n,""),!r(d)){i(n,"Server URL is required."),i(p,"error");return}if(!r(u)){i(n,"Access Token is required."),i(p,"error");return}let e=r(d).trim();e.endsWith("/")&&(e=e.slice(0,-1));const t={url:e,token:r(u).trim(),name:"Home Assistant"};try{await be(t),i(n,"Configuration saved securely."),i(p,"success")}catch{i(n,"Failed to save configuration."),i(p,"error")}}function ae(){if(i(n,""),!r(d)||!r(u)){i(n,"Please enter URL and Token first."),i(p,"error");return}i(n,"Ready to connect (Mock)"),i(p,"info")}function ie(e){const t=e.target.value;h.update(a=>{const l={...a,mode:t};return h.save(l),l})}function re(e){const t=e.target.value;h.update(a=>{const l={...a,activeThemeId:t};return h.save(l),l})}function B(e,t){h.update(a=>{const l={...a,schedule:{...a.schedule,[e]:t}};return h.save(l),l})}var C=Ae(),A=s(c(C),2),x=s(c(A),2),_=s(c(x),2);_.__change=ie;var $=c(_);$.value=$.__value="auto";var L=s($);L.value=L.__value="day";var E=s(L);E.value=E.__value="night";var q=s(E);q.value=q.__value="schedule",o(_);var F;V(_),o(x);var I=s(x,2),m=s(c(I),2);m.__change=re,he(m,21,()=>Se,fe,(e,t)=>{var a=ye(),l=c(a,!0);o(a);var f={};b(()=>{P(l,r(t).name),f!==(f=r(t).id)&&(a.value=(a.__value=r(t).id)??"")}),g(e,a)}),o(m);var G;V(m),o(I);var oe=s(I,2);{var le=e=>{var t=Te(),a=c(t),l=s(c(a),2);S(l),l.__change=D=>B("darkStart",D.currentTarget.value),o(a);var f=s(a,2),U=s(c(f),2);S(U),U.__change=D=>B("darkEnd",D.currentTarget.value),o(f),o(t),b(()=>{Q(l,v().schedule.darkStart),Q(U,v().schedule.darkEnd)}),g(e,t)};K(oe,e=>{v().mode==="schedule"&&e(le)})}o(A);var N=s(A,2),M=s(c(N),4),z=s(c(M),2);S(z),W(2),o(M);var w=s(M,2),J=s(c(w),2);S(J),W(2),o(w);var H=s(w,2),O=c(H);O.__click=ae;var ce=s(O,2);ce.__click=se,o(H);var ne=s(H,2);{var ve=e=>{var t=Ce(),a=c(t,!0);o(t),b(()=>{ke(t,1,`message ${r(p)??""}`,"svelte-1i19ct2"),P(a,r(n))}),g(e,t)};K(ne,e=>{r(n)&&e(ve)})}o(N),o(C),b(()=>{F!==(F=v().mode)&&(_.value=(_.__value=v().mode)??"",Y(_,v().mode)),G!==(G=v().activeThemeId)&&(m.value=(m.__value=v().activeThemeId)??"",Y(m,v().activeThemeId))}),X(z,()=>r(d),e=>i(d,e)),X(J,()=>r(u),e=>i(u,e)),g(Z,C),_e(),te()}de(["change","click"]);export{He as component};
