import{d as O,f as C,a as y,s as W}from"../chunks/DvnUWzw8.js";import{O as G,F as J,a as t,s as e,Q as l,R as n,T as M,U as p,V as S,W as v,X as P}from"../chunks/MIkDUfiV.js";import{s as Q,i as V,a as X}from"../chunks/D5ZglsIW.js";import{r as T}from"../chunks/CLQ7akle.js";import{a as j,s as z,b as B}from"../chunks/BR8Jsj42.js";import{b as $}from"../chunks/DPq1ZZcs.js";var D=C("<div> </div>"),E=C('<div class="settings-container svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2">Server URL</label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2">Long-Lived Access Token</label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">Test Connection</button> <button class="btn-primary svelte-1i19ct2">Save Configuration</button></div> <!></div>');function te(A,L){G(L,!0);const u=()=>Q(j,"$appState",R),[R,U]=X();let r=p(""),i=p(""),a=p(""),o=p("info");J(()=>{u().activeServer&&t(r)===""&&t(i)===""&&(e(r,u().activeServer.url,!0),e(i,u().activeServer.token,!0))});async function x(){if(e(a,""),!t(r)){e(a,"Server URL is required."),e(o,"error");return}if(!t(i)){e(a,"Access Token is required."),e(o,"error");return}let s=t(r).trim();s.endsWith("/")&&(s=s.slice(0,-1));const c={url:s,token:t(i).trim(),name:"Home Assistant"};try{await z(c),e(a,"Configuration saved securely."),e(o,"success")}catch{e(a,"Failed to save configuration."),e(o,"error")}}function w(){if(e(a,""),!t(r)||!t(i)){e(a,"Please enter URL and Token first."),e(o,"error");return}e(a,"Ready to connect (Mock)"),e(o,"info")}var d=E(),f=n(l(d),4),g=n(l(f),2);T(g),S(2),v(f);var m=n(f,2),b=n(l(m),2);T(b),S(2),v(m);var _=n(m,2),h=l(_);h.__click=w;var H=n(h,2);H.__click=x,v(_);var q=n(_,2);{var F=s=>{var c=D(),k=l(c,!0);v(c),P(()=>{B(c,1,`message ${t(o)??""}`,"svelte-1i19ct2"),W(k,t(a))}),y(s,c)};V(q,s=>{t(a)&&s(F)})}v(d),$(g,()=>t(r),s=>e(r,s)),$(b,()=>t(i),s=>e(i,s)),y(A,d),M(),U()}O(["click"]);export{te as component};
