import{d as dt,f as y,s as b,a as _,e as xt,c as lt}from"../chunks/Ce4_kbAy.js";import{B as at,G as a,J as i,F as s,a as e,C as R,N as I,H as T,I as ot,s as j,c as nt,M as et}from"../chunks/CM9YBULs.js";import{i as P,s as V,a as bt}from"../chunks/BlMTQ3nd.js";import{d as ct,f as Ht,e as St,$ as Et,h as Tt,r as wt}from"../chunks/3QiWljis.js";import{c as jt,b as kt}from"../chunks/CZ7GPu7O.js";import{e as Ft,i as Mt,u as vt,s as Dt}from"../chunks/TQTxLml0.js";import{p as _t}from"../chunks/693m_8jx.js";import{o as It}from"../chunks/M-PbikfX.js";import{s as zt,a as it}from"../chunks/D-ksKLD4.js";import{b as Lt}from"../chunks/86kbj1ft.js";var Ct=y('<div class="error-text svelte-oocbx9"> </div>'),Ot=y('<button class="action-button svelte-oocbx9"> </button>'),Rt=y('<div class="entity-row svelte-oocbx9"><div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id svelte-oocbx9"> </div> <!></div> <div class="entity-state svelte-oocbx9"><div class="state-badge svelte-oocbx9"> </div></div> <!></div>');function Bt(F,t){at(t,!0);let u=R(!1),o=R(null);async function h(){try{j(u,!0),j(o,null),await Ht(t.entity.entity_id)}catch(c){console.error("Toggle error:",c),j(o,c.message||"Toggle failed",!0)}finally{j(u,!1)}}let m=I(()=>Ft(t.entity.entity_id)),H=I(()=>t.entity.attributes.friendly_name||t.entity.entity_id),M=I(()=>Mt(e(m)));var r=Rt(),g=a(r),p=a(g),w=a(p,!0);i(p);var v=s(p,2),k=a(v,!0);i(v);var l=s(v,2);{var d=c=>{var x=Ct(),E=a(x,!0);i(x),T(()=>b(E,e(o))),_(c,x)};P(l,c=>{e(o)&&c(d)})}i(g);var S=s(g,2),z=a(S),n=a(z,!0);i(z),i(S);var f=s(S,2);{var D=c=>{var x=Ot();x.__click=h;var E=a(x,!0);i(x),T(()=>{x.disabled=e(u),b(E,e(u)?"...":t.entity.state==="on"?"Off":"On")}),_(c,x)};P(f,c=>{e(M)&&c(D)})}i(r),T(()=>{ct(r,"data-domain",e(m)),b(w,e(H)),b(k,t.entity.entity_id),b(n,t.entity.state)}),_(F,r),ot()}dt(["click"]);var Gt=y('<div class="virtual-item svelte-dzt997"><!></div>'),Nt=y('<div class="virtual-container svelte-dzt997"><div class="virtual-spacer svelte-dzt997"></div></div>');function At(F,t){at(t,!0);let u=_t(t,"height",3,"100%"),o,h=R(0),m=R(0);const H=5;let M=I(()=>t.items.length*t.itemHeight),r=I(()=>Math.max(0,Math.floor(e(h)/t.itemHeight)-H)),g=I(()=>Math.min(t.items.length,Math.ceil((e(h)+e(m))/t.itemHeight)+H)),p=I(()=>t.items.slice(e(r),e(g)).map((l,d)=>({item:l,index:e(r)+d,offset:(e(r)+d)*t.itemHeight})));function w(l){j(h,l.target.scrollTop,!0)}It(()=>{if(o){j(m,o.clientHeight,!0);const l=new ResizeObserver(d=>{for(const S of d)j(m,S.contentRect.height,!0)});return l.observe(o),()=>l.disconnect()}});var v=Nt(),k=a(v);St(k,21,()=>e(p),({item:l,index:d,offset:S})=>t.keyField?l[t.keyField]:d,(l,d)=>{let S=()=>e(d).item,z=()=>e(d).index,n=()=>e(d).offset;var f=Gt(),D=a(f);zt(D,()=>t.children,()=>({item:S(),index:z()})),i(f),T(()=>it(f,`transform: translateY(${n()??""}px); height: ${t.itemHeight??""}px`)),_(l,f)}),i(k),i(v),Lt(v,l=>o=l,()=>o),T(()=>{it(v,`height: ${u()??""}`),it(k,`height: ${e(M)??""}px`)}),xt("scroll",v,w),_(F,v),ot()}var Jt=y('<div class="row-wrapper svelte-t6avkx"><!></div>'),Pt=y('<div class="entity-list-container svelte-t6avkx"><!></div>');function Qt(F,t){let u=_t(t,"entities",19,()=>[]);const o=72;var h=Pt(),m=a(h);At(m,{get items(){return u()},itemHeight:o,height:"calc(100vh - 200px)",keyField:"entity_id",children:(M,r)=>{let g=()=>r==null?void 0:r().item;var p=Jt(),w=a(p);Bt(w,{get entity(){return g()}}),i(p),_(M,p)},$$slots:{default:!0}}),i(h),_(F,h)}var Vt=y('<div class="loading"> </div>'),Yt=y('<p class="error svelte-1ipj8go"> </p>'),qt=y("<p> </p>"),Kt=y('<div class="controls svelte-1ipj8go"><div class="filters svelte-1ipj8go"><input type="text" class="search-input svelte-1ipj8go"/> <select class="domain-select svelte-1ipj8go"><option> </option><option>Lights</option><option>Switches</option><option>Sensors</option><option>Binary Sensors</option><option>Climate</option><option>Covers</option><option>Media Players</option><option>Scripts</option><option>Automations</option></select></div> <div class="results-count svelte-1ipj8go"> </div></div> <!>',1),Ut=y('<div class="page-entities svelte-1ipj8go"><div class="page-header svelte-1ipj8go"><h1> </h1></div> <!></div>');function re(F,t){at(t,!0);const u=()=>V(vt,"$uiDashboardState",H),o=()=>V(Et,"$t",H),h=()=>V(Tt,"$haStore",H),m=()=>V(Dt,"$selectFilteredEntities",H),[H,M]=bt();let r=R(nt(u().filters.search||"")),g=R(nt(u().filters.domain||""));function p(){vt.update(n=>({...n,filters:{...n.filters,search:e(r),domain:e(g)===""?void 0:e(g)}}))}var w=Ut(),v=a(w),k=a(v),l=a(k,!0);i(k),i(v);var d=s(v,2);{var S=n=>{var f=Vt(),D=a(f,!0);i(f),T(c=>b(D,c),[()=>o()("entities.loading")]),_(n,f)},z=n=>{var f=lt(),D=et(f);{var c=E=>{var L=Yt(),Y=a(L);i(L),T(()=>b(Y,`Error: ${h().error??""}`)),_(E,L)},x=E=>{var L=lt(),Y=et(L);{var ut=C=>{var O=qt(),B=a(O,!0);i(O),T(G=>b(B,G),[()=>o()("entities.noEntities")]),_(C,O)},ht=C=>{var O=Kt(),B=et(O),G=a(B),N=a(G);wt(N),N.__input=p;var Q=s(N,2);Q.__change=p;var A=a(Q),ft=a(A,!0);i(A),A.value=A.__value="";var q=s(A);q.value=q.__value="light";var K=s(q);K.value=K.__value="switch";var U=s(K);U.value=U.__value="sensor";var W=s(U);W.value=W.__value="binary_sensor";var X=s(W);X.value=X.__value="climate";var Z=s(X);Z.value=Z.__value="cover";var $=s(Z);$.value=$.__value="media_player";var tt=s($);tt.value=tt.__value="script";var st=s(tt);st.value=st.__value="automation",i(Q),i(G);var rt=s(G,2),mt=a(rt,!0);i(rt),i(B);var gt=s(B,2);Qt(gt,{get entities(){return m()}}),T((J,pt,yt)=>{ct(N,"placeholder",J),b(ft,pt),b(mt,yt)},[()=>o()("entities.search"),()=>o()("entities.allDomains"),()=>o()("entities.showing",{count:m().length})]),jt(N,()=>e(r),J=>j(r,J)),kt(Q,()=>e(g),J=>j(g,J)),_(C,O)};P(Y,C=>{m().length===0&&!u().filters.search&&!u().filters.domain?C(ut):C(ht,!1)},!0)}_(E,L)};P(D,E=>{h().error?E(c):E(x,!1)},!0)}_(n,f)};P(d,n=>{h().isLoading?n(S):n(z,!1)})}i(w),T(n=>b(l,n),[()=>o()("entities.title")]),_(F,w),ot(),M()}dt(["input","change"]);export{re as component};
