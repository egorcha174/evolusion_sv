import{d as de,f as k,a as g,s as j}from"../chunks/Gpl8Tn-c.js";import{B as pe,a as _e,g as i,s as a,C as s,F as o,G as S,H as he,I as b,J as r,K as z}from"../chunks/BA3XBSiu.js";import{s as E,i as Q,a as me}from"../chunks/Hguoowj-.js";import{e as fe,b as ge,s as Se,i as be,r as y,c as V}from"../chunks/BjuM01OE.js";import{s as ye}from"../chunks/BkNOWxgU.js";import{i as X,b as Y,s as Z}from"../chunks/CqyZnBkk.js";import{t as T}from"../chunks/b79T9gJ2.js";var Te=k("<option> </option>"),ke=k('<div class="schedule-inputs svelte-1i19ct2"><div class="form-group svelte-1i19ct2"><label for="day-start" class="svelte-1i19ct2">Day Start</label> <input type="time" id="day-start" class="svelte-1i19ct2"/></div> <div class="form-group svelte-1i19ct2"><label for="night-start" class="svelte-1i19ct2">Night Start</label> <input type="time" id="night-start" class="svelte-1i19ct2"/></div></div>'),Ce=k("<div> </div>"),$e=k('<div class="settings-container svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Appearance</h2> <div class="form-group svelte-1i19ct2"><label for="theme-mode" class="svelte-1i19ct2">Mode</label> <select id="theme-mode" class="svelte-1i19ct2"><option>Auto (System)</option><option>Day (Always Light)</option><option>Night (Always Dark)</option><option>Schedule</option></select></div> <div class="form-group svelte-1i19ct2"><label for="theme-select" class="svelte-1i19ct2">Theme</label> <select id="theme-select" class="svelte-1i19ct2"></select></div> <!></section> <section class="settings-section svelte-1i19ct2"><h2 class="svelte-1i19ct2">Connection</h2> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2">Server URL</label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2">Long-Lived Access Token</label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">Test Connection</button> <button class="btn-primary svelte-1i19ct2">Save Configuration</button></div> <!></section></div>');function Re(ee,te){pe(te,!0);const C=()=>E(ge,"$appState",q),c=()=>E(T,"$themeStore",q),[q,se]=me();let v=b(""),u=b(""),n=b(""),d=b("info");_e(()=>{C().activeServer&&i(v)===""&&i(u)===""&&(a(v,C().activeServer.url,!0),a(u,C().activeServer.token,!0))});async function ae(){if(a(n,""),!i(v)){a(n,"Server URL is required."),a(d,"error");return}if(!i(u)){a(n,"Access Token is required."),a(d,"error");return}let e=i(v).trim();e.endsWith("/")&&(e=e.slice(0,-1));const t={url:e,token:i(u).trim(),name:"Home Assistant"};try{await Se(t),a(n,"Configuration saved securely."),a(d,"success")}catch{a(n,"Failed to save configuration."),a(d,"error")}}function ie(){if(a(n,""),!i(v)||!i(u)){a(n,"Please enter URL and Token first."),a(d,"error");return}a(n,"Ready to connect (Mock)"),a(d,"info")}function re(e){const t=e.target.value;T.setMode(t)}function oe(e){const t=e.target.value;T.setTheme(t)}function F(e,t){const h={...c().schedule||{mode:"time",dayStart:"07:00",nightStart:"22:00"},[e]:t};T.setSchedule(h)}var $=$e(),A=s(o($),2),w=s(o(A),2),p=s(o(w),2);p.__change=re;var x=o(p);x.value=x.__value="auto";var L=s(x);L.value=L.__value="day";var I=s(L);I.value=I.__value="night";var G=s(I);G.value=G.__value="schedule",r(p);var J;X(p),r(w);var H=s(w,2),_=s(o(H),2);_.__change=oe,fe(_,5,()=>c().availableThemes,be,(e,t)=>{var l=Te(),h=o(l);r(l);var f={};S(()=>{j(h,`${i(t).name??""} ${i(t).isCustom?"(Custom)":""}`),f!==(f=i(t).id)&&(l.value=(l.__value=i(t).id)??"")}),g(e,l)}),r(_);var N;X(_),r(H);var le=s(H,2);{var ce=e=>{var t=ke(),l=o(t),h=s(o(l),2);y(h),h.__change=m=>F("dayStart",m.currentTarget.value),r(l);var f=s(l,2),D=s(o(f),2);y(D),D.__change=m=>F("nightStart",m.currentTarget.value),r(f),r(t),S(()=>{var m,W;V(h,((m=c().schedule)==null?void 0:m.dayStart)||"07:00"),V(D,((W=c().schedule)==null?void 0:W.nightStart)||"22:00")}),g(e,t)};Q(le,e=>{c().mode==="schedule"&&e(ce)})}r(A);var B=s(A,2),M=s(o(B),4),K=s(o(M),2);y(K),z(2),r(M);var R=s(M,2),O=s(o(R),2);y(O),z(2),r(R);var U=s(R,2),P=o(U);P.__click=ie;var ne=s(P,2);ne.__click=ae,r(U);var ve=s(U,2);{var ue=e=>{var t=Ce(),l=o(t,!0);r(t),S(()=>{ye(t,1,`message ${i(d)??""}`,"svelte-1i19ct2"),j(l,i(n))}),g(e,t)};Q(ve,e=>{i(n)&&e(ue)})}r(B),r($),S(()=>{J!==(J=c().mode)&&(p.value=(p.__value=c().mode)??"",Z(p,c().mode)),N!==(N=c().currentThemeId)&&(_.value=(_.__value=c().currentThemeId)??"",Z(_,c().currentThemeId))}),Y(K,()=>i(v),e=>a(v,e)),Y(O,()=>i(u),e=>a(u,e)),g(ee,$),he(),se()}de(["change","click"]);export{Re as component};
