import{d as ne,f as y,s as L,a as p,c as $}from"../chunks/DvnUWzw8.js";import{m as le,o as K,aA as ve,q as ue,ae as de,aB as _e,aC as ce,ay as fe,O as te,Q as u,W as l,R as o,a as i,U as N,aD as M,X as E,T as ae,s as k,Y as V}from"../chunks/MIkDUfiV.js";import{i as A,a as pe,s as ee}from"../chunks/D5ZglsIW.js";import{s as me,r as ge}from"../chunks/CLQ7akle.js";import{b as ye}from"../chunks/DPq1ZZcs.js";import{t as he,e as be,h as xe,a as Se}from"../chunks/WTy43ldd.js";import{p as we}from"../chunks/Cn2xEhi2.js";import{e as ie,i as Le}from"../chunks/CZ606ANP.js";function re(e,t,r=!1){if(e.multiple){if(t==null)return;if(!de(t))return _e();for(var a of e.options)a.selected=t.includes(D(a));return}for(a of e.options){var s=D(a);if(ce(s,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ke(e){var t=new MutationObserver(()=>{re(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fe(()=>{t.disconnect()})}function Ce(e,t,r=t){var a=new WeakSet,s=!0;le(e,"change",n=>{var c=n?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(c),D);else{var m=e.querySelector(c)??e.querySelector("option:not([disabled])");v=m&&D(m)}r(v),K!==null&&a.add(K)}),ve(()=>{var n=t();if(e===document.activeElement){var c=ue??K;if(a.has(c))return}if(re(e,n,s),s&&n===void 0){var v=e.querySelector(":checked");v!==null&&(n=D(v),r(n))}e.__value=n,s=!1}),ke(e)}function D(e){return"__value"in e?e.__value:e.value}var Te=y('<div class="error-text svelte-oocbx9"> </div>'),je=y('<button class="action-button svelte-oocbx9"> </button>'),qe=y('<div class="entity-row svelte-oocbx9"><div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id svelte-oocbx9"> </div> <!></div> <div class="entity-state svelte-oocbx9"><div class="state-badge svelte-oocbx9"> </div></div> <!></div>');function Ee(e,t){te(t,!0);let r=N(!1),a=N(null);async function s(){try{k(r,!0),k(a,null),await he(t.entity.entity_id)}catch(_){console.error("Toggle error:",_),k(a,_.message||"Toggle failed",!0)}finally{k(r,!1)}}let n=M(()=>ie(t.entity.entity_id)),c=M(()=>t.entity.attributes.friendly_name||t.entity.entity_id),v=M(()=>Le(i(n)));var m=qe(),S=u(m),C=u(S),Q=u(C,!0);l(C);var T=o(C,2),d=u(T,!0);l(T);var h=o(T,2);{var j=_=>{var f=Te(),g=u(f,!0);l(f),E(()=>L(g,i(a))),p(_,f)};A(h,_=>{i(a)&&_(j)})}l(S);var w=o(S,2),O=u(w),b=u(O,!0);l(O),l(w);var x=o(w,2);{var q=_=>{var f=je();f.__click=s;var g=u(f,!0);l(f),E(()=>{f.disabled=i(r),L(g,i(r)?"...":t.entity.state==="on"?"Off":"On")}),p(_,f)};A(x,_=>{i(v)&&_(q)})}l(m),E(()=>{me(m,"data-domain",i(n)),L(Q,i(c)),L(d,t.entity.entity_id),L(b,t.entity.state)}),p(e,m),ae()}ne(["click"]);var Ae=y('<div class="entity-list svelte-t6avkx"></div>');function De(e,t){let r=we(t,"entities",19,()=>[]);var a=Ae();be(a,21,r,s=>s.entity_id,(s,n)=>{Ee(s,{get entity(){return i(n)}})}),l(a),p(e,a)}var Oe=y("<p>Loading entities...</p>"),Be=y('<p class="error svelte-1ipj8go"> </p>'),Me=y("<p>No entities connected. Check your Home Assistant settings.</p>"),Ne=y('<div class="filters svelte-1ipj8go"><input type="text" placeholder="Search entities..." class="search-input svelte-1ipj8go"/> <select class="domain-select svelte-1ipj8go"><option>All domains</option><option>Lights</option><option>Switches</option><option>Sensors</option><option>Binary Sensors</option><option>Climate</option><option>Covers</option><option>Media Players</option></select></div> <div class="results-count svelte-1ipj8go"> </div> <!>',1),Qe=y('<div class="page-entities svelte-1ipj8go"><h1>All Entities</h1> <!></div>');function Ye(e,t){te(t,!0);const r=()=>ee(Se,"$entityList",s),a=()=>ee(xe,"$haStore",s),[s,n]=pe();let c=N(""),v=N(null),m=M(()=>r().filter(d=>{const h=d.entity_id.toLowerCase().includes(i(c).toLowerCase())||(d.attributes.friendly_name||"").toLowerCase().includes(i(c).toLowerCase()),j=ie(d.entity_id),w=!i(v)||j===i(v);return h&&w}));var S=Qe(),C=o(u(S),2);{var Q=d=>{var h=Oe();p(d,h)},T=d=>{var h=$(),j=V(h);{var w=b=>{var x=Be(),q=u(x);l(x),E(()=>L(q,`Error: ${a().error??""}`)),p(b,x)},O=b=>{var x=$(),q=V(x);{var _=g=>{var B=Me();p(g,B)},f=g=>{var B=Ne(),R=V(B),W=u(R);ge(W);var F=o(W,2),H=u(F);H.value=(H.__value=null)??"";var I=o(H);I.value=I.__value="light";var P=o(I);P.value=P.__value="switch";var U=o(P);U.value=U.__value="sensor";var X=o(U);X.value=X.__value="binary_sensor";var Y=o(X);Y.value=Y.__value="climate";var z=o(Y);z.value=z.__value="cover";var Z=o(z);Z.value=Z.__value="media_player",l(F),l(R);var G=o(R,2),oe=u(G);l(G);var se=o(G,2);De(se,{get entities(){return i(m)}}),E(()=>L(oe,`Showing ${i(m).length??""} of ${r().length??""} entities`)),ye(W,()=>i(c),J=>k(c,J)),Ce(F,()=>i(v),J=>k(v,J)),p(g,B)};A(q,g=>{r().length===0?g(_):g(f,!1)},!0)}p(b,x)};A(j,b=>{a().error?b(w):b(O,!1)},!0)}p(d,h)};A(C,d=>{a().isLoading?d(Q):d(T,!1)})}l(S),p(e,S),ae(),n()}export{Ye as component};
