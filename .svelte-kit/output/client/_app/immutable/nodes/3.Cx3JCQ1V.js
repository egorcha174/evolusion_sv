import{a as c,f as p,c as Ft}from"../chunks/CYiN1Ptg.js";import{m as mt,B as e,A as T,a,C as t,E as s,n as xt,ak as st,al as Z,s as B,o as $t,b as Yt,z as wt}from"../chunks/DrE23S9z.js";import{d as Vt,s as h,e as te}from"../chunks/Dx6vUp0w.js";import{i as U,s as Nt,a as lt,b as ee}from"../chunks/d16_jLoQ.js";import{t as K,f as vt,s as ie,a as zt}from"../chunks/BsUdYIhF.js";import{d as r,s as M,a as kt,f as ae,$ as Rt,e as Bt,h as se,b as Lt,i as oe,r as ne,j as le,k as ve}from"../chunks/DoxDpSa6.js";import{e as re,i as ce,a as de,d as _e,b as ue,u as qt,h as ge,t as Jt,s as fe}from"../chunks/-3n6O5sP.js";import{p as Pt}from"../chunks/lSMfcQqK.js";import{D as he}from"../chunks/DphtNWIa.js";var be=p('<span class="error-text svelte-oocbx9"> </span>'),ye=p('<span class="unit svelte-oocbx9"> </span>'),pe=p('<button class="add-to-dashboard-btn svelte-oocbx9"><iconify-icon></iconify-icon> <span class="btn-text svelte-oocbx9"> </span></button>',2),me=p('<div class="spinner svelte-oocbx9"></div>'),xe=p('<button aria-label="Toggle"><div class="switch-handle svelte-oocbx9"><!></div></button>'),je=p('<div><div class="entity-main svelte-oocbx9"><div><iconify-icon></iconify-icon></div> <div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id-row svelte-oocbx9"><span class="entity-id svelte-oocbx9"> </span> <!></div></div></div> <div class="entity-actions svelte-oocbx9"><div class="state-badge-container svelte-oocbx9"><span> <!></span></div> <div class="actions-group svelte-oocbx9"><!> <!></div></div></div>',2);function we($,i){mt(i,!0);const m=()=>lt(Rt,"$t",v),[v,z]=Nt();let w=st(!1),S=st(null);async function P(g){g.stopPropagation();try{B(w,!0),B(S,null),await de(i.entity.entity_id)}catch(n){console.error("Toggle error:",n),B(S,n.message||"Toggle failed",!0)}finally{B(w,!1)}}let x=Z(()=>re(i.entity.entity_id)),D=Z(()=>i.entity.attributes.friendly_name||i.entity.entity_id),H=Z(()=>ce(a(x))),k=Z(()=>ae(a(x))),d=Z(()=>i.entity.state==="on"?m()("common.on"):i.entity.state==="off"?m()("common.off"):i.entity.state==="unavailable"?m()("entities.status.unavailable"):i.entity.state==="unknown"?m()("entities.status.unknown"):i.entity.state),b=Z(()=>i.entity.state==="on"||i.entity.state==="open"||i.entity.state==="unlocked");var o=je();let l;var _=e(o),I=e(_);let N;var E=e(I);T(()=>r(E,"icon",a(k))),r(E,"width","24"),r(E,"height","24"),M(E,1,"svelte-oocbx9"),t(I);var G=s(I,2),R=e(G),rt=e(R,!0);t(R);var u=s(R,2),j=e(u),O=e(j,!0);t(j);var Q=s(j,2);{var ot=g=>{var n=be(),y=e(n);t(n),T(()=>h(y,`â€¢ ${a(S)??""}`)),c(g,n)};U(Q,g=>{a(S)&&g(ot)})}t(u),t(G),t(_);var ct=s(_,2),gt=e(ct),ft=e(gt);let jt;var f=e(ft),Y=s(f);{var dt=g=>{var n=ye(),y=e(n,!0);t(n),T(()=>h(y,i.entity.attributes.unit_of_measurement)),c(g,n)};U(Y,g=>{i.entity.attributes.unit_of_measurement&&g(dt)})}t(ft),t(gt);var _t=s(gt,2),ut=e(_t);{var it=g=>{var n=pe();n.__click=L=>{var C;L.stopPropagation(),(C=i.onAddToTab)==null||C.call(i)};var y=e(n);r(y,"icon","mdi:view-dashboard-plus-outline"),r(y,"width","18"),r(y,"height","18"),M(y,1,"svelte-oocbx9");var A=s(y,2),q=e(A,!0);t(A),t(n),T((L,C)=>{kt(n,"title",L),h(q,C)},[()=>m()("entities.addToTab.button",{default:"Add to Dashboard"}),()=>m()("common.add",{default:"Add"})]),c(g,n)};U(ut,g=>{i.onAddToTab&&g(it)})}var tt=s(ut,2);{var nt=g=>{var n=xe();n.__click=P;let y;var A=e(n),q=e(A);{var L=C=>{var V=me();c(C,V)};U(q,C=>{a(w)&&C(L)})}t(A),t(n),T(()=>{n.disabled=a(w),y=M(n,1,"toggle-switch svelte-oocbx9",null,y,{"is-on":a(b)})}),c(g,n)};U(tt,g=>{a(H)&&g(nt)})}t(_t),t(ct),t(o),T(()=>{l=M(o,1,"entity-row svelte-oocbx9",null,l,{active:a(b)}),kt(o,"data-domain",a(x)),N=M(I,1,"icon-container svelte-oocbx9",null,N,{active:a(b)}),kt(R,"title",a(D)),h(rt,a(D)),h(O,i.entity.entity_id),jt=M(ft,1,"state-badge svelte-oocbx9",null,jt,{on:a(b)}),h(f,`${a(d)??""} `)}),c($,o),xt(),z()}Vt(["click"]);var ke=p('<div class="virtual-item svelte-dzt997"><!></div>'),Te=p('<div class="virtual-container svelte-dzt997"><div class="virtual-spacer svelte-dzt997"></div></div>');function Se($,i){mt(i,!0);let m=Pt(i,"height",3,"100%"),v,z=st(0),w=st(0);const S=5;let P=Z(()=>i.items.length*i.itemHeight),x=Z(()=>Math.max(0,Math.floor(a(z)/i.itemHeight)-S)),D=Z(()=>Math.min(i.items.length,Math.ceil((a(z)+a(w))/i.itemHeight)+S)),H=Z(()=>i.items.slice(a(x),a(D)).map((o,l)=>({item:o,index:a(x)+l,offset:(a(x)+l)*i.itemHeight})));function k(o){B(z,o.target.scrollTop,!0)}$t(()=>{if(v){B(w,v.clientHeight,!0);const o=new ResizeObserver(l=>{for(const _ of l)B(w,_.contentRect.height,!0)});return o.observe(v),()=>o.disconnect()}});var d=Te(),b=e(d);Bt(b,21,()=>a(H),({item:o,index:l,offset:_})=>i.keyField?o[i.keyField]:l,(o,l)=>{let _=()=>a(l).item,I=()=>a(l).index,N=()=>a(l).offset;var E=ke(),G=e(E);se(G,()=>i.children,()=>({item:_(),index:I()})),t(E),T(()=>Lt(E,`transform: translateY(${N()??""}px); height: ${i.itemHeight??""}px`)),c(o,E)}),t(b),t(d),ee(d,o=>v=o,()=>v),T(()=>{Lt(d,`height: ${m()??""}`),Lt(b,`height: ${a(P)??""}px`)}),te("scroll",d,k),c($,d),xt()}var Ee=p('<div class="row-wrapper svelte-t6avkx"><!></div>'),Ae=p('<div class="virtual-list-wrapper svelte-t6avkx"><!></div>'),Me=p('<div class="grid-item svelte-t6avkx"><!></div>'),De=p('<div class="grid-wrapper svelte-t6avkx"></div>'),He=p("<div><!></div>");function Ie($,i){mt(i,!0);let m=Pt(i,"entities",19,()=>[]),v=Pt(i,"viewMode",3,"grid");const z=80;var w=He();let S;var P=e(w);{var x=H=>{var k=Ae(),d=e(k);Se(d,{get items(){return m()},itemHeight:z,height:"100%",keyField:"entity_id",children:(o,l)=>{let _=()=>l==null?void 0:l().item;var I=Ee(),N=e(I);we(N,{get entity(){return _()},onAddToTab:()=>{var E;return(E=i.onAddToTab)==null?void 0:E.call(i,_().entity_id,_().attributes.friendly_name||_().entity_id)}}),t(I),c(o,I)},$$slots:{default:!0}}),t(k),K(1,k,()=>vt,()=>({duration:300})),c(H,k)},D=H=>{var k=De();Bt(k,21,m,d=>d.entity_id,(d,b)=>{var o=Me(),l=e(o);he(l,{get entity(){return a(b)},onAddToTab:()=>{var _;return(_=i.onAddToTab)==null?void 0:_.call(i,a(b).entity_id,a(b).attributes.friendly_name||a(b).entity_id)}}),t(o),c(d,o)}),t(k),K(1,k,()=>vt,()=>({duration:300})),c(H,k)};U(P,H=>{v()==="list"?H(x):H(D,!1)})}t(w),T(()=>S=M(w,1,"entity-list-container svelte-t6avkx",null,S,{"list-mode":v()==="list"})),c($,w),xt()}var Ce=p('<button class="tab-item svelte-5h1skv"><iconify-icon></iconify-icon> <span> </span></button>',2),Fe=p('<div class="dialog-overlay svelte-5h1skv" role="presentation"><div class="dialog-content svelte-5h1skv" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog-header svelte-5h1skv"><h3 class="svelte-5h1skv"> </h3> <button class="close-btn svelte-5h1skv" aria-label="Close dialog"><iconify-icon></iconify-icon></button></div> <div class="entity-preview svelte-5h1skv"><span class="label svelte-5h1skv"> </span> <span class="name svelte-5h1skv"> </span></div> <div class="tabs-list svelte-5h1skv"><p class="instruction svelte-5h1skv"> </p> <!></div></div></div>',2);function ze($,i){mt(i,!0);const m=()=>lt(Rt,"$t",z),v=()=>lt(ue,"$tabs",z),[z,w]=Nt();function S(u){_e.addCard(u,i.entityId),i.onclose()}var P=Fe();P.__click=function(...u){var j;(j=i.onclose)==null||j.apply(this,u)},P.__keydown=u=>(u.key==="Escape"||u.key===" ")&&i.onclose();var x=e(P);x.__click=u=>u.stopPropagation(),x.__keydown=u=>u.stopPropagation();var D=e(x),H=e(D),k=e(H,!0);t(H);var d=s(H,2);d.__click=function(...u){var j;(j=i.onclose)==null||j.apply(this,u)};var b=e(d);r(b,"icon","mdi:close"),r(b,"width","24"),r(b,"height","24"),t(d),t(D);var o=s(D,2),l=e(o),_=e(l,!0);t(l);var I=s(l,2),N=e(I,!0);t(I),t(o);var E=s(o,2),G=e(E),R=e(G,!0);t(G);var rt=s(G,2);Bt(rt,1,v,oe,(u,j)=>{var O=Ce();O.__click=()=>S(a(j).id);var Q=e(O);T(()=>r(Q,"icon",a(j).icon||"mdi:view-dashboard")),r(Q,"width","20"),r(Q,"height","20"),M(Q,1,"svelte-5h1skv");var ot=s(Q,2),ct=e(ot,!0);t(ot),t(O),T(()=>h(ct,a(j).title)),c(u,O)}),t(E),t(x),t(P),T((u,j,O)=>{h(k,u),h(_,j),h(N,i.entityName),h(R,O)},[()=>m()("entities.addToTab.title",{default:"Add to Dashboard"}),()=>m()("entities.addToTab.entity",{default:"Entity:"}),()=>m()("entities.addToTab.selectTab",{default:"Select a tab to add this entity to:"})]),K(1,x,()=>ie,()=>({duration:300,start:.95})),K(1,P,()=>vt,()=>({duration:200})),c($,P),xt(),w()}Vt(["click","keydown"]);var Le=p('<div class="state-container svelte-1ipj8go"><div class="spinner svelte-1ipj8go"></div> <p class="svelte-1ipj8go"> </p></div>'),Pe=p('<div class="state-container error svelte-1ipj8go"><div class="icon-wrapper svelte-1ipj8go"><iconify-icon></iconify-icon></div> <h3 class="svelte-1ipj8go"> </h3> <div class="message-box svelte-1ipj8go"> </div> <button class="btn primary svelte-1ipj8go"> </button></div>',2),Ve=p('<div class="state-container warning svelte-1ipj8go"><div class="icon-wrapper svelte-1ipj8go"><iconify-icon></iconify-icon></div> <h3 class="svelte-1ipj8go"> </h3> <p class="message svelte-1ipj8go"> </p> <button class="btn primary svelte-1ipj8go"> </button></div>',2),Ne=p('<div class="state-container empty svelte-1ipj8go"><div class="icon-wrapper svelte-1ipj8go"><iconify-icon></iconify-icon></div> <p class="svelte-1ipj8go"> </p></div>',2),Re=p('<div class="controls glass-panel svelte-1ipj8go"><div class="search-wrapper svelte-1ipj8go"><iconify-icon></iconify-icon> <input type="text" class="search-input svelte-1ipj8go"/></div> <div class="filter-actions svelte-1ipj8go"><div class="select-wrapper svelte-1ipj8go"><select class="domain-select svelte-1ipj8go"><option class="svelte-1ipj8go"> </option><option class="svelte-1ipj8go">Lights</option><option class="svelte-1ipj8go">Switches</option><option class="svelte-1ipj8go">Sensors</option><option class="svelte-1ipj8go">Binary Sensors</option><option class="svelte-1ipj8go">Climate</option><option class="svelte-1ipj8go">Covers</option><option class="svelte-1ipj8go">Media Players</option><option class="svelte-1ipj8go">Scripts</option><option class="svelte-1ipj8go">Automations</option></select> <iconify-icon></iconify-icon></div> <div class="results-count svelte-1ipj8go"> </div></div></div> <div class="list-wrapper svelte-1ipj8go"><!></div>',3),Be=p('<div class="page-entities svelte-1ipj8go"><div class="glass-background svelte-1ipj8go"></div> <header class="page-header svelte-1ipj8go"><div class="header-content svelte-1ipj8go"><h1 class="svelte-1ipj8go"> </h1> <div class="view-toggles svelte-1ipj8go"><button aria-label="List View"><iconify-icon></iconify-icon></button> <button aria-label="Grid View"><iconify-icon></iconify-icon></button></div></div></header> <!> <!></div>',2);function Xe($,i){mt(i,!0);const m=()=>lt(qt,"$uiDashboardState",S),v=()=>lt(Rt,"$t",S),z=()=>lt(ge,"$haStore",S),w=()=>lt(fe,"$selectFilteredEntities",S),[S,P]=Nt();let x=st("grid"),D=st(null);function H(f,Y){B(D,{id:f,name:Y},!0)}let k=st(Yt(m().filters.search||"")),d=st(Yt(m().filters.domain||""));function b(){qt.update(f=>({...f,filters:{...f.filters,search:a(k),domain:a(d)===""?void 0:a(d)}}))}function o(f){B(x,f,!0)}var l=Be(),_=s(e(l),2),I=e(_),N=e(I),E=e(N,!0);t(N);var G=s(N,2),R=e(G);let rt;R.__click=()=>o("list");var u=e(R);r(u,"icon","mdi:format-list-bulleted"),r(u,"width","20"),M(u,1,"svelte-1ipj8go"),t(R);var j=s(R,2);let O;j.__click=()=>o("grid");var Q=e(j);r(Q,"icon","mdi:view-grid-outline"),r(Q,"width","20"),M(Q,1,"svelte-1ipj8go"),t(j),t(G),t(I),t(_);var ot=s(_,2);{var ct=f=>{var Y=Le(),dt=s(e(Y),2),_t=e(dt,!0);t(dt),t(Y),T(ut=>h(_t,ut),[()=>v()("entities.loading")]),K(1,Y,()=>vt),c(f,Y)},gt=f=>{var Y=Ft(),dt=wt(Y);{var _t=it=>{var tt=Pe(),nt=e(tt),g=e(nt);r(g,"icon","mdi:alert-circle-outline"),r(g,"width","64"),M(g,1,"svelte-1ipj8go"),t(nt);var n=s(nt,2),y=e(n,!0);t(n);var A=s(n,2),q=e(A,!0);t(A);var L=s(A,2);L.__click=function(...V){var F;(F=Jt)==null||F.apply(this,V)};var C=e(L,!0);t(L),t(tt),T((V,F)=>{h(y,V),h(q,z().error),h(C,F)},[()=>v()("common.error"),()=>v()("settings.title")]),K(1,tt,()=>vt),c(it,tt)},ut=it=>{var tt=Ft(),nt=wt(tt);{var g=y=>{var A=Ve(),q=e(A),L=e(q);r(L,"icon","mdi:lan-disconnect"),r(L,"width","64"),M(L,1,"svelte-1ipj8go"),t(q);var C=s(q,2),V=e(C,!0);t(C);var F=s(C,2),W=e(F,!0);t(F);var J=s(F,2);J.__click=function(...X){var et;(et=Jt)==null||et.apply(this,X)};var at=e(J,!0);t(J),t(A),T((X,et,ht)=>{h(V,X),h(W,et),h(at,ht)},[()=>v()("sidebar.offline"),()=>v()("entities.noEntities"),()=>v()("settings.title")]),K(1,A,()=>vt),c(y,A)},n=y=>{var A=Ft(),q=wt(A);{var L=V=>{var F=Ne(),W=e(F),J=e(W);r(J,"icon","mdi:package-variant-closed"),r(J,"width","64"),M(J,1,"svelte-1ipj8go"),t(W);var at=s(W,2),X=e(at,!0);t(at),t(F),T(et=>h(X,et),[()=>v()("entities.noEntities")]),K(1,F,()=>vt),c(V,F)},C=V=>{var F=Re(),W=wt(F),J=e(W),at=e(J);r(at,"icon","mdi:magnify"),M(at,1,"search-icon svelte-1ipj8go");var X=s(at,2);ne(X),X.__input=b,t(J);var et=s(J,2),ht=e(et),bt=e(ht);bt.__change=b;var yt=e(bt),Kt=e(yt,!0);t(yt),yt.value=yt.__value="";var Tt=s(yt);Tt.value=Tt.__value="light";var St=s(Tt);St.value=St.__value="switch";var Et=s(St);Et.value=Et.__value="sensor";var At=s(Et);At.value=At.__value="binary_sensor";var Mt=s(At);Mt.value=Mt.__value="climate";var Dt=s(Mt);Dt.value=Dt.__value="cover";var Ht=s(Dt);Ht.value=Ht.__value="media_player";var It=s(Ht);It.value=It.__value="script";var Gt=s(It);Gt.value=Gt.__value="automation",t(bt);var Ot=s(bt,2);r(Ot,"icon","mdi:chevron-down"),M(Ot,1,"select-arrow svelte-1ipj8go"),t(ht);var Qt=s(ht,2),Ut=e(Qt,!0);t(Qt),t(et),t(W);var Ct=s(W,2),Wt=e(Ct);Ie(Wt,{get entities(){return w()},get viewMode(){return a(x)},onAddToTab:H}),t(Ct),T((pt,Xt,Zt)=>{kt(X,"placeholder",pt),h(Kt,Xt),h(Ut,Zt)},[()=>v()("entities.search"),()=>v()("entities.allDomains"),()=>v()("entities.showing",{values:{count:w().length}})]),le(X,()=>a(k),pt=>B(k,pt)),ve(bt,()=>a(d),pt=>B(d,pt)),K(1,W,()=>zt,()=>({y:20,duration:600,delay:100})),K(1,Ct,()=>zt,()=>({y:20,duration:600,delay:200})),c(V,F)};U(q,V=>{w().length===0&&!m().filters.search&&!m().filters.domain?V(L):V(C,!1)},!0)}c(y,A)};U(nt,y=>{z().isConnected?y(n,!1):y(g)},!0)}c(it,tt)};U(dt,it=>{z().error?it(_t):it(ut,!1)},!0)}c(f,Y)};U(ot,f=>{z().isLoading?f(ct):f(gt,!1)})}var ft=s(ot,2);{var jt=f=>{ze(f,{get entityId(){return a(D).id},get entityName(){return a(D).name},onclose:()=>B(D,null)})};U(ft,f=>{a(D)&&f(jt)})}t(l),T(f=>{h(E,f),rt=M(R,1,"toggle-btn svelte-1ipj8go",null,rt,{active:a(x)==="list"}),O=M(j,1,"toggle-btn svelte-1ipj8go",null,O,{active:a(x)==="grid"})},[()=>v()("entities.title")]),K(1,_,()=>zt,()=>({y:-20,duration:600})),c($,l),xt(),P()}Vt(["click","input","change"]);export{Xe as component};
