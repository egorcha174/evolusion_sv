import{d as j,f as T,a as y,s as G}from"../chunks/9VUrH7ci.js";import{aj as J,F as M,a as t,s as e,ak as l,al as n,am as O,an as p,ao as S,ap as v,aq as P}from"../chunks/D0a70CTa.js";import{s as W,i as z,a as B}from"../chunks/DxkxnZKK.js";import{r as $}from"../chunks/BI-XfFbb.js";import{a as D,s as E,b as I}from"../chunks/Dxl5keZG.js";import{b as C}from"../chunks/BcN-Ujwj.js";var K=T("<div> </div>"),N=T('<div class="settings-container svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2">Server URL</label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2">Long-Lived Access Token</label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">Test Connection</button> <button class="btn-primary svelte-1i19ct2">Save Configuration</button></div> <!></div>');function te(A,L){J(L,!0);const u=()=>W(D,"$appState",x),[x,R]=B();let r=p(""),i=p(""),a=p(""),o=p("info");M(()=>{u().activeServer&&t(r)===""&&t(i)===""&&(e(r,u().activeServer.url,!0),e(i,u().activeServer.token,!0))});async function U(){if(e(a,""),!t(r)){e(a,"Server URL is required."),e(o,"error");return}if(!t(i)){e(a,"Access Token is required."),e(o,"error");return}let s=t(r).trim();s.endsWith("/")&&(s=s.slice(0,-1));const c={url:s,token:t(i).trim(),name:"Home Assistant"};try{await E(c),e(a,"Configuration saved securely."),e(o,"success")}catch{e(a,"Failed to save configuration."),e(o,"error")}}function q(){if(e(a,""),!t(r)||!t(i)){e(a,"Please enter URL and Token first."),e(o,"error");return}e(a,"Ready to connect (Mock)"),e(o,"info")}var d=N(),f=n(l(d),4),g=n(l(f),2);$(g),S(2),v(f);var m=n(f,2),b=n(l(m),2);$(b),S(2),v(m);var _=n(m,2),h=l(_);h.__click=q;var w=n(h,2);w.__click=U,v(_);var H=n(_,2);{var F=s=>{var c=K(),k=l(c,!0);v(c),P(()=>{I(c,1,`message ${t(o)??""}`,"svelte-1i19ct2"),G(k,t(a))}),y(s,c)};z(H,s=>{t(a)&&s(F)})}v(d),C(g,()=>t(r),s=>e(r,s)),C(b,()=>t(i),s=>e(i,s)),y(A,d),O(),R()}j(["click"]);export{te as component};
