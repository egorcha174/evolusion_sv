import{d as nt,f as g,s as j,a as d,e as _t,c as st}from"../chunks/Gpl8Tn-c.js";import{B as et,F as o,J as a,C as l,g as e,I as L,aE as F,G as M,H as it,s as H,n as rt,W as Z}from"../chunks/BA3XBSiu.js";import{i as C,s as $,a as ut}from"../chunks/Hguoowj-.js";import{d as ht,e as mt,r as ft}from"../chunks/BjuM01OE.js";import{b as gt,a as pt}from"../chunks/CqyZnBkk.js";import{e as yt,i as bt,t as xt,u as lt,h as St,s as Ht}from"../chunks/DwQRJBkW.js";import{p as vt,b as Et}from"../chunks/UtaNBNqr.js";import{o as Tt}from"../chunks/BoWhb0nM.js";import{s as kt,a as tt}from"../chunks/C9CBdDPl.js";var wt=g('<div class="error-text svelte-oocbx9"> </div>'),jt=g('<button class="action-button svelte-oocbx9"> </button>'),Ft=g('<div class="entity-row svelte-oocbx9"><div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id svelte-oocbx9"> </div> <!></div> <div class="entity-state svelte-oocbx9"><div class="state-badge svelte-oocbx9"> </div></div> <!></div>');function Mt(E,t){et(t,!0);let c=L(!1),n=L(null);async function _(){try{H(c,!0),H(n,null),await xt(t.entity.entity_id)}catch(v){console.error("Toggle error:",v),H(n,v.message||"Toggle failed",!0)}finally{H(c,!1)}}let m=F(()=>yt(t.entity.entity_id)),T=F(()=>t.entity.attributes.friendly_name||t.entity.entity_id),S=F(()=>bt(e(m)));var s=Ft(),y=o(s),u=o(y),k=o(u,!0);a(u);var f=l(u,2),w=o(f,!0);a(f);var i=l(f,2);{var r=v=>{var p=wt(),A=o(p,!0);a(p),M(()=>j(A,e(n))),d(v,p)};C(i,v=>{e(n)&&v(r)})}a(y);var b=l(y,2),I=o(b),z=o(I,!0);a(I),a(b);var h=l(b,2);{var x=v=>{var p=jt();p.__click=_;var A=o(p,!0);a(p),M(()=>{p.disabled=e(c),j(A,e(c)?"...":t.entity.state==="on"?"Off":"On")}),d(v,p)};C(h,v=>{e(S)&&v(x)})}a(s),M(()=>{ht(s,"data-domain",e(m)),j(k,e(T)),j(w,t.entity.entity_id),j(z,t.entity.state)}),d(E,s),it()}nt(["click"]);var It=g('<div class="virtual-item svelte-dzt997"><!></div>'),Dt=g('<div class="virtual-container svelte-dzt997"><div class="virtual-spacer svelte-dzt997"></div></div>');function Lt(E,t){et(t,!0);let c=vt(t,"height",3,"100%"),n,_=L(0),m=L(0);const T=5;let S=F(()=>t.items.length*t.itemHeight),s=F(()=>Math.max(0,Math.floor(e(_)/t.itemHeight)-T)),y=F(()=>Math.min(t.items.length,Math.ceil((e(_)+e(m))/t.itemHeight)+T)),u=F(()=>t.items.slice(e(s),e(y)).map((i,r)=>({item:i,index:e(s)+r,offset:(e(s)+r)*t.itemHeight})));function k(i){H(_,i.target.scrollTop,!0)}Tt(()=>{if(n){H(m,n.clientHeight,!0);const i=new ResizeObserver(r=>{for(const b of r)H(m,b.contentRect.height,!0)});return i.observe(n),()=>i.disconnect()}});var f=Dt(),w=o(f);mt(w,21,()=>e(u),({item:i,index:r,offset:b})=>t.keyField?i[t.keyField]:r,(i,r)=>{let b=()=>e(r).item,I=()=>e(r).index,z=()=>e(r).offset;var h=It(),x=o(h);kt(x,()=>t.children,()=>({item:b(),index:I()})),a(h),M(()=>tt(h,`transform: translateY(${z()??""}px); height: ${t.itemHeight??""}px`)),d(i,h)}),a(w),a(f),Et(f,i=>n=i,()=>n),M(()=>{tt(f,`height: ${c()??""}`),tt(w,`height: ${e(S)??""}px`)}),_t("scroll",f,k),d(E,f),it()}var zt=g('<div class="row-wrapper svelte-t6avkx"><!></div>'),At=g('<div class="entity-list-container svelte-t6avkx"><!></div>');function Ct(E,t){let c=vt(t,"entities",19,()=>[]);const n=72;var _=At(),m=o(_);Lt(m,{get items(){return c()},itemHeight:n,height:"calc(100vh - 200px)",keyField:"entity_id",children:(S,s)=>{let y=()=>s==null?void 0:s().item;var u=zt(),k=o(u);Mt(k,{get entity(){return y()}}),a(u),d(S,u)},$$slots:{default:!0}}),a(_),d(E,_)}var Ot=g('<div class="loading">Loading entities...</div>'),Rt=g('<p class="error svelte-1ipj8go"> </p>'),Bt=g("<p>No entities connected. Check your Home Assistant settings.</p>"),Gt=g('<div class="controls svelte-1ipj8go"><div class="filters svelte-1ipj8go"><input type="text" placeholder="Search entities..." class="search-input svelte-1ipj8go"/> <select class="domain-select svelte-1ipj8go"><option>All domains</option><option>Lights</option><option>Switches</option><option>Sensors</option><option>Binary Sensors</option><option>Climate</option><option>Covers</option><option>Media Players</option><option>Scripts</option><option>Automations</option></select></div> <div class="results-count svelte-1ipj8go"> </div></div> <!>',1),Nt=g('<div class="page-entities svelte-1ipj8go"><div class="page-header svelte-1ipj8go"><h1>All Entities</h1></div> <!></div>');function Xt(E,t){et(t,!0);const c=()=>$(lt,"$uiDashboardState",m),n=()=>$(St,"$haStore",m),_=()=>$(Ht,"$selectFilteredEntities",m),[m,T]=ut();let S=L(rt(c().filters.search||"")),s=L(rt(c().filters.domain||""));function y(){lt.update(i=>({...i,filters:{...i.filters,search:e(S),domain:e(s)===""?void 0:e(s)}}))}var u=Nt(),k=l(o(u),2);{var f=i=>{var r=Ot();d(i,r)},w=i=>{var r=st(),b=Z(r);{var I=h=>{var x=Rt(),v=o(x);a(x),M(()=>j(v,`Error: ${n().error??""}`)),d(h,x)},z=h=>{var x=st(),v=Z(x);{var p=D=>{var O=Bt();d(D,O)},A=D=>{var O=Gt(),G=Z(O),N=o(G),R=o(N);ft(R),R.__input=y;var B=l(R,2);B.__change=y;var J=o(B);J.value=J.__value="";var P=l(J);P.value=P.__value="light";var Q=l(P);Q.value=Q.__value="switch";var V=l(Q);V.value=V.__value="sensor";var W=l(V);W.value=W.__value="binary_sensor";var Y=l(W);Y.value=Y.__value="climate";var q=l(Y);q.value=q.__value="cover";var K=l(q);K.value=K.__value="media_player";var U=l(K);U.value=U.__value="script";var at=l(U);at.value=at.__value="automation",a(B),a(N);var ot=l(N,2),dt=o(ot);a(ot),a(G);var ct=l(G,2);Ct(ct,{get entities(){return _()}}),M(()=>j(dt,`Showing ${_().length??""} entities`)),gt(R,()=>e(S),X=>H(S,X)),pt(B,()=>e(s),X=>H(s,X)),d(D,O)};C(v,D=>{_().length===0&&!c().filters.search&&!c().filters.domain?D(p):D(A,!1)},!0)}d(h,x)};C(b,h=>{n().error?h(I):h(z,!1)},!0)}d(i,r)};C(k,i=>{n().isLoading?i(f):i(w,!1)})}a(u),d(E,u),it(),T()}nt(["input","change"]);export{Xt as component};
