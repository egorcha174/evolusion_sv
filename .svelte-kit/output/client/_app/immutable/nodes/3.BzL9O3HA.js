import{f as I,a as N,c as ue}from"../chunks/DYWGbwQD.js";import{a4 as ae,r as D,ae as Ce,X as re,a0 as Le,I as ke,a as m,b as Ae,a1 as Ne,a2 as Ie,a3 as de,a5 as ie,Z as W,an as Me,aN as Re,az as ce,C as X,Y as le,$ as Oe,aL as ve,aS as he,al as _e,a6 as De,aT as He,aU as qe,aV as ze,aW as R,U as me,W as ye,aX as ne,aH as Fe,aK as Ve,V as Ye,z as Ue,aP as We,E as Xe,aY as Be,aZ as Ke,a7 as Pe,K as be,O as k,R as C,Q as w,ad as K,aR as B,ac as V,M as Ee,s as H,T as oe}from"../chunks/BWA2oz35.js";import{d as Qe,s as O}from"../chunks/8JZ3AmGw.js";import{i as Y,a as Ze,s as pe}from"../chunks/MLiwW76i.js";import{s as Ge,r as Je,b as je}from"../chunks/CdCvGuyU.js";import{t as $e,h as et,e as tt}from"../chunks/CSAi8JHc.js";import{p as at}from"../chunks/Dj_5IFaj.js";function rt(e,t,i){for(var o=[],f=t.length,l,s=t.length,r=0;r<f;r++){let d=t[r];ye(d,()=>{if(l){if(l.pending.delete(d),l.done.add(d),l.pending.size===0){var y=e.outrogroups;se(ve(l.done)),y.delete(l),y.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var v=o.length===0&&i!==null;if(v){var n=i,u=n.parentNode;Ve(u),u.append(n),e.items.clear()}se(t,!v)}else l={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(l)}function se(e,t=!0){for(var i=0;i<e.length;i++)Ye(e[i],t)}var ge;function it(e,t,i,o,f,l=null){var s=e,r=new Map;{var v=e;s=D?ae(Ce(v)):v.appendChild(re())}D&&Le();var n=null,u=Ae(()=>{var c=i();return he(c)?c:c==null?[]:ve(c)}),d,y=!0;function b(){x.fallback=n,nt(x,d,s,t,o),n!==null&&(d.length===0?n.f&R?(n.f^=R,F(n,null,s)):me(n):ye(n,()=>{n=null}))}var a=ke(()=>{d=m(u);var c=d.length;let L=!1;if(D){var h=Ne(s)===Ie;h!==(c===0)&&(s=de(),ae(s),ie(!1),L=!0)}for(var S=new Set,T=X,_=Oe(),p=0;p<c;p+=1){D&&W.nodeType===Me&&W.data===Re&&(s=W,L=!0,ie(!1));var E=d[p],A=o(E,p),g=y?null:r.get(A);g?(g.v&&ce(g.v,E),g.i&&ce(g.i,p),_&&T.skipped_effects.delete(g.e)):(g=ot(r,y?s:ge??(ge=re()),E,A,p,f,t,i),y||(g.e.f|=R),r.set(A,g)),S.add(A)}if(c===0&&l&&!n&&(y?n=le(()=>l(s)):(n=le(()=>l(ge??(ge=re()))),n.f|=R)),D&&c>0&&ae(de()),!y)if(_){for(const[q,z]of r)S.has(q)||T.skipped_effects.add(z.e);T.oncommit(b),T.ondiscard(()=>{})}else b();L&&ie(!0),m(u)}),x={effect:a,items:r,outrogroups:null,fallback:n};y=!1,D&&(s=W)}function nt(e,t,i,o,f){var A;var l=t.length,s=e.items,r=e.effect.first,v,n=null,u=[],d=[],y,b,a,x;for(x=0;x<l;x+=1){if(y=t[x],b=f(y,x),a=s.get(b).e,e.outrogroups!==null)for(const g of e.outrogroups)g.pending.delete(a),g.done.delete(a);if(a.f&R)if(a.f^=R,a===r)F(a,null,i);else{var c=n?n.next:r;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),M(e,n,a),M(e,a,c),F(a,c,i),n=a,u=[],d=[],r=n.next;continue}if(a.f&ne&&me(a),a!==r){if(v!==void 0&&v.has(a)){if(u.length<d.length){var L=d[0],h;n=L.prev;var S=u[0],T=u[u.length-1];for(h=0;h<u.length;h+=1)F(u[h],L,i);for(h=0;h<d.length;h+=1)v.delete(d[h]);M(e,S.prev,T.next),M(e,n,S),M(e,T,L),r=L,n=T,x-=1,u=[],d=[]}else v.delete(a),F(a,r,i),M(e,a.prev,a.next),M(e,a,n===null?e.effect.first:n.next),M(e,n,a),n=a;continue}for(u=[],d=[];r!==null&&r!==a;)(v??(v=new Set)).add(r),d.push(r),r=r.next;if(r===null)continue}a.f&R||u.push(a),n=a,r=a.next}if(e.outrogroups!==null){for(const g of e.outrogroups)g.pending.size===0&&(se(ve(g.done)),(A=e.outrogroups)==null||A.delete(g));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||v!==void 0){var _=[];if(v!==void 0)for(a of v)a.f&ne||_.push(a);for(;r!==null;)!(r.f&ne)&&r!==e.fallback&&_.push(r),r=r.next;var p=_.length;if(p>0){var E=l===0?i:null;rt(e,_,E)}}}function ot(e,t,i,o,f,l,s,r){var v=s&qe?s&ze?_e(i):De(i,!1,!1):null,n=s&He?_e(f):null;return{v,i:n,e:le(()=>(l(t,v??i,n??f,r),()=>{e.delete(o)}))}}function F(e,t,i){if(e.nodes)for(var o=e.nodes.start,f=e.nodes.end,l=t&&!(t.f&R)?t.nodes.start:i;o!==null;){var s=Fe(o);if(l.before(o),o===f)return;o=s}}function M(e,t,i){t===null?e.effect.first=i:t.next=i,i===null?e.effect.last=t:i.prev=t}function xe(e,t,i=!1){if(e.multiple){if(t==null)return;if(!he(t))return Be();for(var o of e.options)o.selected=t.includes(U(o));return}for(o of e.options){var f=U(o);if(Ke(f,t)){o.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function lt(e){var t=new MutationObserver(()=>{xe(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Pe(()=>{t.disconnect()})}function st(e,t,i=t){var o=new WeakSet,f=!0;Ue(e,"change",l=>{var s=l?"[selected]":":checked",r;if(e.multiple)r=[].map.call(e.querySelectorAll(s),U);else{var v=e.querySelector(s)??e.querySelector("option:not([disabled])");r=v&&U(v)}i(r),X!==null&&o.add(X)}),We(()=>{var l=t();if(e===document.activeElement){var s=Xe??X;if(o.has(s))return}if(xe(e,l,f),f&&l===void 0){var r=e.querySelector(":checked");r!==null&&(l=U(r),i(l))}e.__value=l,f=!1}),lt(e)}function U(e){return"__value"in e?e.__value:e.value}function we(e){return e.split(".")[0]}function vt(e){return["light","switch","cover","lock","input_boolean","automation","script"].includes(e)}var ft=I('<div class="error-text svelte-oocbx9"> </div>'),ut=I('<button class="action-button svelte-oocbx9"> </button>'),dt=I('<div class="entity-row svelte-oocbx9"><div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id svelte-oocbx9"> </div> <!></div> <div class="entity-state svelte-oocbx9"><div class="state-badge svelte-oocbx9"> </div></div> <!></div>');function ct(e,t){be(t,!0);let i=K(!1),o=K(null);async function f(){try{H(i,!0),H(o,null),await $e(t.entity.entity_id)}catch(_){console.error("Toggle error:",_),H(o,_.message||"Toggle failed",!0)}finally{H(i,!1)}}let l=B(()=>we(t.entity.entity_id)),s=B(()=>t.entity.attributes.friendly_name||t.entity.entity_id),r=B(()=>vt(m(l)));var v=dt(),n=k(v),u=k(n),d=k(u,!0);C(u);var y=w(u,2),b=k(y,!0);C(y);var a=w(y,2);{var x=_=>{var p=ft(),E=k(p,!0);C(p),V(()=>O(E,m(o))),N(_,p)};Y(a,_=>{m(o)&&_(x)})}C(n);var c=w(n,2),L=k(c),h=k(L,!0);C(L),C(c);var S=w(c,2);{var T=_=>{var p=ut();p.__click=f;var E=k(p,!0);C(p),V(()=>{p.disabled=m(i),O(E,m(i)?"...":t.entity.state==="on"?"Off":"On")}),N(_,p)};Y(S,_=>{m(r)&&_(T)})}C(v),V(()=>{Ge(v,"data-domain",m(l)),O(d,m(s)),O(b,t.entity.entity_id),O(h,t.entity.state)}),N(e,v),Ee()}Qe(["click"]);var _t=I('<div class="entity-list svelte-t6avkx"></div>');function pt(e,t){let i=at(t,"entities",19,()=>[]);var o=_t();it(o,21,i,f=>f.entity_id,(f,l)=>{ct(f,{get entity(){return m(l)}})}),C(o),N(e,o)}var gt=I("<p>Loading entities...</p>"),ht=I('<p class="error svelte-1ipj8go"> </p>'),mt=I("<p>No entities connected. Check your Home Assistant settings.</p>"),yt=I('<div class="filters svelte-1ipj8go"><input type="text" placeholder="Search entities..." class="search-input svelte-1ipj8go"/> <select class="domain-select svelte-1ipj8go"><option>All domains</option><option>Lights</option><option>Switches</option><option>Sensors</option><option>Binary Sensors</option><option>Climate</option><option>Covers</option><option>Media Players</option></select></div> <div class="results-count svelte-1ipj8go"> </div> <!>',1),bt=I('<div class="page-entities svelte-1ipj8go"><h1>All Entities</h1> <!></div>');function kt(e,t){be(t,!0);const i=()=>pe(tt,"$entityList",f),o=()=>pe(et,"$haStore",f),[f,l]=Ze();let s=K(""),r=K(null),v=B(()=>i().filter(b=>{const a=b.entity_id.toLowerCase().includes(m(s).toLowerCase())||(b.attributes.friendly_name||"").toLowerCase().includes(m(s).toLowerCase()),x=we(b.entity_id),c=!m(r)||x===m(r);return a&&c}));var n=bt(),u=w(k(n),2);{var d=b=>{var a=gt();N(b,a)},y=b=>{var a=ue(),x=oe(a);{var c=h=>{var S=ht(),T=k(S);C(S),V(()=>O(T,`Error: ${o().error??""}`)),N(h,S)},L=h=>{var S=ue(),T=oe(S);{var _=E=>{var A=mt();N(E,A)},p=E=>{var A=yt(),g=oe(A),q=k(g);Je(q);var z=w(q,2),P=k(z);P.value=(P.__value=null)??"";var Q=w(P);Q.value=Q.__value="light";var Z=w(Q);Z.value=Z.__value="switch";var G=w(Z);G.value=G.__value="sensor";var J=w(G);J.value=J.__value="binary_sensor";var j=w(J);j.value=j.__value="climate";var $=w(j);$.value=$.__value="cover";var fe=w($);fe.value=fe.__value="media_player",C(z),C(g);var ee=w(g,2),Se=k(ee);C(ee);var Te=w(ee,2);pt(Te,{get entities(){return m(v)}}),V(()=>O(Se,`Showing ${m(v).length??""} of ${i().length??""} entities`)),je(q,()=>m(s),te=>H(s,te)),st(z,()=>m(r),te=>H(r,te)),N(E,A)};Y(T,E=>{i().length===0?E(_):E(p,!1)},!0)}N(h,S)};Y(x,h=>{o().error?h(c):h(L,!1)},!0)}N(b,a)};Y(u,b=>{o().isLoading?b(d):b(y,!1)})}C(n),N(e,n),Ee(),l()}export{kt as component};
