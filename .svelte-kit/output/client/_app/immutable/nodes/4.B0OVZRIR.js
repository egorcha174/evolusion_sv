import{f as w,a as C}from"../chunks/DYWGbwQD.js";import{r as T,K as O,o as F,a as s,s as e,O as f,Q as v,M as G,ad as m,n as L,R as d,ac as J}from"../chunks/BWA2oz35.js";import{d as K,s as P}from"../chunks/8JZ3AmGw.js";import{s as Q,i as W,a as j}from"../chunks/MLiwW76i.js";import{b as R,r as U}from"../chunks/CdCvGuyU.js";import{a as z,s as B}from"../chunks/C-77_1uC.js";function D(r,p,c){var n=r==null?"":""+r;return n=n?n+" "+p:p,n===""?null:n}function E(r,p,c,n,k,o){var i=r.__className;if(T||i!==c||i===void 0){var t=D(c,n);(!T||t!==r.getAttribute("class"))&&(t==null?r.removeAttribute("class"):r.className=t),r.__className=c}return o}var I=w("<div> </div>"),V=w('<div class="settings-container svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2">Server URL</label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2">Long-Lived Access Token</label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">Test Connection</button> <button class="btn-primary svelte-1i19ct2">Save Configuration</button></div> <!></div>');function ae(r,p){O(p,!0);const c=()=>Q(z,"$appState",n),[n,k]=j();let o=m(""),i=m(""),t=m(""),l=m("info");F(()=>{c().activeServer&&s(o)===""&&s(i)===""&&(e(o,c().activeServer.url,!0),e(i,c().activeServer.token,!0))});async function H(){if(e(t,""),!s(o)){e(t,"Server URL is required."),e(l,"error");return}if(!s(i)){e(t,"Access Token is required."),e(l,"error");return}let a=s(o).trim();a.endsWith("/")&&(a=a.slice(0,-1));const u={url:a,token:s(i).trim(),name:"Home Assistant"};try{await B(u),e(t,"Configuration saved securely."),e(l,"success")}catch{e(t,"Failed to save configuration."),e(l,"error")}}function N(){if(e(t,""),!s(o)||!s(i)){e(t,"Please enter URL and Token first."),e(l,"error");return}e(t,"Ready to connect (Mock)"),e(l,"info")}var _=V(),g=v(f(_),4),y=v(f(g),2);U(y),L(2),d(g);var b=v(g,2),S=v(f(b),2);U(S),L(2),d(b);var h=v(b,2),A=f(h);A.__click=N;var q=v(A,2);q.__click=H,d(h);var x=v(h,2);{var M=a=>{var u=I(),$=f(u,!0);d(u),J(()=>{E(u,1,`message ${s(l)??""}`,"svelte-1i19ct2"),P($,s(t))}),C(a,u)};W(x,a=>{s(t)&&a(M)})}d(_),R(y,()=>s(o),a=>e(o,a)),R(S,()=>s(i),a=>e(i,a)),C(r,_),G(),k()}K(["click"]);export{ae as component};
