import{f as y,a as p,c as $}from"../chunks/Ce9YDZfT.js";import{m as ne,o as V,aZ as le,q as ve,a0 as ue,a_ as de,a$ as _e,at as ce,ag as te,ah as u,am as l,ai as o,a as i,ak as B,b0 as N,an as T,aj as ae,s as k,ap as X}from"../chunks/CHWeQpjd.js";import{d as fe,s as L}from"../chunks/BxIVbMkZ.js";import{i as A,a as pe,s as ee}from"../chunks/D3jBc4OI.js";import{s as me,r as ge}from"../chunks/c2fIvuCP.js";import{b as ye}from"../chunks/C8hPC_J4.js";import{t as he,h as be,e as xe}from"../chunks/BjWtm3XP.js";import{e as ie,i as Se,a as we}from"../chunks/CXY4_Tbm.js";import{p as Le}from"../chunks/BPcN3Ab7.js";function re(e,t,r=!1){if(e.multiple){if(t==null)return;if(!ue(t))return de();for(var a of e.options)a.selected=t.includes(D(a));return}for(a of e.options){var s=D(a);if(_e(s,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ke(e){var t=new MutationObserver(()=>{re(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ce(()=>{t.disconnect()})}function je(e,t,r=t){var a=new WeakSet,s=!0;ne(e,"change",n=>{var c=n?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(c),D);else{var m=e.querySelector(c)??e.querySelector("option:not([disabled])");v=m&&D(m)}r(v),V!==null&&a.add(V)}),le(()=>{var n=t();if(e===document.activeElement){var c=ve??V;if(a.has(c))return}if(re(e,n,s),s&&n===void 0){var v=e.querySelector(":checked");v!==null&&(n=D(v),r(n))}e.__value=n,s=!1}),ke(e)}function D(e){return"__value"in e?e.__value:e.value}var Ce=y('<div class="error-text svelte-oocbx9"> </div>'),qe=y('<button class="action-button svelte-oocbx9"> </button>'),Ee=y('<div class="entity-row svelte-oocbx9"><div class="entity-info svelte-oocbx9"><div class="entity-name svelte-oocbx9"> </div> <div class="entity-id svelte-oocbx9"> </div> <!></div> <div class="entity-state svelte-oocbx9"><div class="state-badge svelte-oocbx9"> </div></div> <!></div>');function Te(e,t){te(t,!0);let r=B(!1),a=B(null);async function s(){try{k(r,!0),k(a,null),await he(t.entity.entity_id)}catch(_){console.error("Toggle error:",_),k(a,_.message||"Toggle failed",!0)}finally{k(r,!1)}}let n=N(()=>ie(t.entity.entity_id)),c=N(()=>t.entity.attributes.friendly_name||t.entity.entity_id),v=N(()=>Se(i(n)));var m=Ee(),S=u(m),j=u(S),F=u(j,!0);l(j);var C=o(j,2),d=u(C,!0);l(C);var h=o(C,2);{var q=_=>{var f=Ce(),g=u(f,!0);l(f),T(()=>L(g,i(a))),p(_,f)};A(h,_=>{i(a)&&_(q)})}l(S);var w=o(S,2),O=u(w),b=u(O,!0);l(O),l(w);var x=o(w,2);{var E=_=>{var f=qe();f.__click=s;var g=u(f,!0);l(f),T(()=>{f.disabled=i(r),L(g,i(r)?"...":t.entity.state==="on"?"Off":"On")}),p(_,f)};A(x,_=>{i(v)&&_(E)})}l(m),T(()=>{me(m,"data-domain",i(n)),L(F,i(c)),L(d,t.entity.entity_id),L(b,t.entity.state)}),p(e,m),ae()}fe(["click"]);var Ae=y('<div class="entity-list svelte-t6avkx"></div>');function De(e,t){let r=Le(t,"entities",19,()=>[]);var a=Ae();we(a,21,r,s=>s.entity_id,(s,n)=>{Te(s,{get entity(){return i(n)}})}),l(a),p(e,a)}var Oe=y("<p>Loading entities...</p>"),Me=y('<p class="error svelte-1ipj8go"> </p>'),Ne=y("<p>No entities connected. Check your Home Assistant settings.</p>"),Be=y('<div class="filters svelte-1ipj8go"><input type="text" placeholder="Search entities..." class="search-input svelte-1ipj8go"/> <select class="domain-select svelte-1ipj8go"><option>All domains</option><option>Lights</option><option>Switches</option><option>Sensors</option><option>Binary Sensors</option><option>Climate</option><option>Covers</option><option>Media Players</option></select></div> <div class="results-count svelte-1ipj8go"> </div> <!>',1),Fe=y('<div class="page-entities svelte-1ipj8go"><h1>All Entities</h1> <!></div>');function Je(e,t){te(t,!0);const r=()=>ee(xe,"$entityList",s),a=()=>ee(be,"$haStore",s),[s,n]=pe();let c=B(""),v=B(null),m=N(()=>r().filter(d=>{const h=d.entity_id.toLowerCase().includes(i(c).toLowerCase())||(d.attributes.friendly_name||"").toLowerCase().includes(i(c).toLowerCase()),q=ie(d.entity_id),w=!i(v)||q===i(v);return h&&w}));var S=Fe(),j=o(u(S),2);{var F=d=>{var h=Oe();p(d,h)},C=d=>{var h=$(),q=X(h);{var w=b=>{var x=Me(),E=u(x);l(x),T(()=>L(E,`Error: ${a().error??""}`)),p(b,x)},O=b=>{var x=$(),E=X(x);{var _=g=>{var M=Ne();p(g,M)},f=g=>{var M=Be(),H=X(M),I=u(H);ge(I);var P=o(I,2),Q=u(P);Q.value=(Q.__value=null)??"";var R=o(Q);R.value=R.__value="light";var W=o(R);W.value=W.__value="switch";var Z=o(W);Z.value=Z.__value="sensor";var z=o(Z);z.value=z.__value="binary_sensor";var G=o(z);G.value=G.__value="climate";var J=o(G);J.value=J.__value="cover";var Y=o(J);Y.value=Y.__value="media_player",l(P),l(H);var K=o(H,2),oe=u(K);l(K);var se=o(K,2);De(se,{get entities(){return i(m)}}),T(()=>L(oe,`Showing ${i(m).length??""} of ${r().length??""} entities`)),ye(I,()=>i(c),U=>k(c,U)),je(P,()=>i(v),U=>k(v,U)),p(g,M)};A(E,g=>{r().length===0?g(_):g(f,!1)},!0)}p(b,x)};A(q,b=>{a().error?b(w):b(O,!1)},!0)}p(d,h)};A(j,d=>{a().isLoading?d(F):d(C,!1)})}l(S),p(e,S),ae(),n()}export{Je as component};
