import{f as C,a as y}from"../chunks/Ce9YDZfT.js";import{ag as F,A as G,a as t,s as e,ah as l,ai as n,aj as J,ak as p,al as S,am as v,an as M}from"../chunks/CHWeQpjd.js";import{d as O,s as P}from"../chunks/BxIVbMkZ.js";import{s as W,i as z,a as B}from"../chunks/D3jBc4OI.js";import{r as $}from"../chunks/c2fIvuCP.js";import{s as D}from"../chunks/DgRfmkp8.js";import{b as A}from"../chunks/C8hPC_J4.js";import{a as E,s as I}from"../chunks/BI3YNUcV.js";var K=C("<div> </div>"),N=C('<div class="settings-container svelte-1i19ct2"><h1 class="svelte-1i19ct2">Settings</h1> <p class="description svelte-1i19ct2">Configure your Home Assistant connection details.</p> <div class="form-group svelte-1i19ct2"><label for="url" class="svelte-1i19ct2">Server URL</label> <input id="url" type="url" placeholder="http://homeassistant.local:8123" autocomplete="url" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">e.g. http://192.168.1.100:8123</span></div> <div class="form-group svelte-1i19ct2"><label for="token" class="svelte-1i19ct2">Long-Lived Access Token</label> <input id="token" type="password" placeholder="eyJhbGciOi..." autocomplete="current-password" class="svelte-1i19ct2"/> <span class="hint svelte-1i19ct2">Create this in your HA profile settings.</span></div> <div class="actions svelte-1i19ct2"><button class="btn-secondary svelte-1i19ct2">Test Connection</button> <button class="btn-primary svelte-1i19ct2">Save Configuration</button></div> <!></div>');function ae(T,L){F(L,!0);const u=()=>W(E,"$appState",x),[x,R]=B();let r=p(""),i=p(""),a=p(""),o=p("info");G(()=>{u().activeServer&&t(r)===""&&t(i)===""&&(e(r,u().activeServer.url,!0),e(i,u().activeServer.token,!0))});async function U(){if(e(a,""),!t(r)){e(a,"Server URL is required."),e(o,"error");return}if(!t(i)){e(a,"Access Token is required."),e(o,"error");return}let s=t(r).trim();s.endsWith("/")&&(s=s.slice(0,-1));const c={url:s,token:t(i).trim(),name:"Home Assistant"};try{await I(c),e(a,"Configuration saved securely."),e(o,"success")}catch{e(a,"Failed to save configuration."),e(o,"error")}}function w(){if(e(a,""),!t(r)||!t(i)){e(a,"Please enter URL and Token first."),e(o,"error");return}e(a,"Ready to connect (Mock)"),e(o,"info")}var d=N(),f=n(l(d),4),g=n(l(f),2);$(g),S(2),v(f);var m=n(f,2),h=n(l(m),2);$(h),S(2),v(m);var _=n(m,2),b=l(_);b.__click=w;var H=n(b,2);H.__click=U,v(_);var q=n(_,2);{var j=s=>{var c=K(),k=l(c,!0);v(c),M(()=>{D(c,1,`message ${t(o)??""}`,"svelte-1i19ct2"),P(k,t(a))}),y(s,c)};z(q,s=>{t(a)&&s(j)})}v(d),A(g,()=>t(r),s=>e(r,s)),A(h,()=>t(i),s=>e(i,s)),y(T,d),J(),R()}O(["click"]);export{ae as component};
