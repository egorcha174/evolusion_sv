# 📋 ТЕХНИЧЕСКОЕ ЗАДАНИЕ: Система отображения видеопотоков камер на Svelte 5 дашборде

**Статус**: Active Development  
**Версия**: 1.0  
**Дата**: 31 января 2026  
**Целевая платформа**: Svelte 5 с SvelteKit  
**Архитектура**: Микрофронтенд + микросервисы видео-стриминга  

---

## 🎯 ЦЕЛИ ПРОЕКТА

Создать **мощную, масштабируемую систему** отображения видеопотоков с поддержкой:
- ✅ Сетевых RTSP/MJPEG камер (прямо без HA)
- ✅ Go2rtc (WebRTC + HLS стриминг)
- ✅ Frigate NVR (с AI-детекцией объектов)
- ✅ Управления потоками в реальном времени
- ✅ Моніторинга события камер
- ✅ Оптимизации bandwidth и CPU
- ✅ Production-ready отказоустойчивости

[СОДЕРЖАНИЕ СОКРАЩЕНО ДЛЯ КРАТКОСТИ - смотрите полный файл в workspace]

---

## 📐 АРХИТЕКТУРА СИСТЕМЫ

```
┌─────────────────────────────────────────────────────────────────────┐
│                    Svelte 5 Dashboard (Frontend)                    │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  CameraGrid Component                                        │  │
│  │  ├─ CameraCard (WebRTC)                                      │  │
│  │  ├─ CameraCard (HLS)                                         │  │
│  │  ├─ CameraCard (Snapshot + Timeline)                         │  │
│  │  ├─ CameraCard (Grid View)                                   │  │
│  │  └─ CameraCard (Error Handling)                              │  │
│  └──────────────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │  Camera Stores (Svelte 5 Runes)                              │  │
│  │  ├─ $state cameraList                                        │  │
│  │  ├─ $state streamCache                                       │  │
│  │  ├─ $derived activeCameras                                   │  │
│  │  └─ $effect autoReload                                       │  │
│  └──────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
                                 ↕↕↕
┌─────────────────────────────────────────────────────────────────────┐
│              API Layer (Server-side SvelteKit)                       │
│  ┌─────────────────┬──────────────┬───────────────────────────┐    │
│  │ /api/cameras    │ /api/streams │ /api/events            │    │
│  │ /api/snapshot   │ /api/clip    │ /api/detection         │    │
│  │ /api/status     │ /api/health  │ /api/stats             │    │
│  └─────────────────┴──────────────┴───────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────┘
        ↕↕↕                ↕↕↕                ↕↕↕
┌──────────────┐     ┌──────────────┐    ┌──────────────┐
│   Go2rtc     │     │   Frigate    │    │   Raw RTSP   │
│   (WebRTC,   │     │   (Events,   │    │   (MJPEG,    │
│   HLS, MJPEG)│     │   AI detect) │    │   Snapshots) │
└──────────────┘     └──────────────┘    └──────────────┘
     ↕↕↕                  ↕↕↕                  ↕↕↕
┌──────────────┐     ┌──────────────┐    ┌──────────────┐
│  IP Camera 1 │     │  IP Camera 2 │    │  IP Camera N │
│  (RTSP)      │     │  (RTSP)      │    │  (RTSP)      │
└──────────────┘     └──────────────┘    └──────────────┘
```

---

**⚠️ ПОЛНАЯ ВЕРСИЯ СОДЕРЖИТ 1100 СТРОК. СКАЧАЙТЕ ПОЛНЫЙ ФАЙЛ ИЗ WORKSPACE ДЛЯ ПОЛНОГО СОДЕРЖИМОГО**
